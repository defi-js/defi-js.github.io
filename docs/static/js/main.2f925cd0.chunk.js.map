{"version":3,"sources":["assets/orbs.png","assets/logo.svg","assets/list-icon1.svg","assets/list-icon2.svg","assets/list-icon3.svg","assets/list-icon4.svg","assets/list-icon5.svg","assets/dotted-line.svg","assets/geom1.png","assets/geom2.png","positions/base/consts.ts","state/AppState.ts","positions/base/PositionFactory.ts","positions/Pancakeswap.ts","positions/base/Position.ts","positions/Loops.ts","ui/AppHeader.tsx","positions/base/PriceOracle.ts","positions/Revault.ts","positions/Unicly.ts","positions/Fodl.ts","positions/TokenBalances.ts","positions/Uniswap.ts","positions/OffChain.ts","positions/AlphaHomora.ts","positions/Balancer.ts","positions/ElrondMaiar.ts","positions/TraderJoe.ts","positions/Ribbon.ts","positions/LooksRare.ts","positions/SushiSwap.ts","positions/index.ts","state/AllPositionsState.ts","state/PositionDialogState.ts","state/AddPositionDialogState.ts","ui/AddPositionDialog.tsx","ui/AllPositionsTable.tsx","ui/PositionDialog.tsx","ui/AlertDialog.tsx","ui/ImportExport.tsx","App.tsx","index.tsx","Homepage.tsx"],"names":["erc20s","_","merge","erc20sOrig","contracts","contractsOrig","networks","networksOrig","egld","id","name","shortname","off","currentNetwork","a","netId","bn","window","ethereum","chainId","toNumber","console","log","find","n","sendWithTxType","tx","useLegacyTx","account","from","type","send","isNetworkDisabled","network","AppState","createStore","initialState","allNetworks","loading","wallet","alertDialog","actions","withLoading","thunk","setState","_withLoading","showAlert","alert","clickNetwork","networkId","getState","_ethereum","removeAllListeners","on","_onConnect","request","method","_switchNetwork","t","message","stack","setWeb3Instance","Web3","Error","params","utils","numberToHex","Severity","useAppState","createHook","useIsAppConnected","selector","state","isAddress","useIsLoading","useAppActions","AppHeader","style","display","flexDirection","justifyContent","margin","ToggleButtonGroup","value","exclusive","onChange","p","parseInt","target","map","ToggleButton","textTransform","disabled","coingeckoIds","eth","bsc","poly","arb","avax","PriceOracle","warm","prices","USD","ether","token","tokenId","symbol","address","price","this","getId","amount","isZero","fetchPricesElrond","fetchPrices","toString","zero","mul","div","positions","bynetwork","groupBy","getNetwork","coingeckoFetches","keys","filter","getAssets","concat","getRewardAssets","flatten","uniq","elrondFetch","Promise","all","addresses","isEmpty","coingeckoId","v","k","url","join","fetch","response","json","result","mapKeys","web3","toChecksumAddress","mapValues","bn18","usd","updateResults","tokenIds","body","variables","i","query","headers","JSON","stringify","data","inputs","results","registry","oracle","isElrondAddress","startsWith","e","types","args","uniqueId","current","trim","length","isOffChainSymbol","PositionFactory","register","Farm","BUSD","WBNB","Pancakeswap_LP_BUSD_BNB","CAKE","Pancakeswap_LP_CAKE_BNB","ORBS","Pancakeswap_LP_ORBS_BUSD","BTCB","Pancakeswap_LP_BTCB_BNB","DOT","Pancakeswap_LP_DOT_BNB","ADA","Pancakeswap_LP_ADA_BNB","LINK","Pancakeswap_LP_LINK_BNB","DOGE","Pancakeswap_LP_DOGE_BNB","asset0","asset1","lpToken","poolId","masterchef","Pancakeswap_Masterchef","cake","amount0","amount1","value0","value1","rewardAmount","rewardValue","tvl","getName","getArgs","getData","getHealth","getAmounts","asset","getPendingRewards","getTVL","getContractMethods","functions","methods","userInfo","call","getReserves","token0","totalSupply","pendingCake","balanceOf","options","reserves","pending","lpStaked","_reserve0","_reserve1","r0","toLowerCase","r1","amountLP","mantissa","valueOf","muln","encodeABI","deposit","Pancakeswap","AaveLoop","WARN_HEALTH_FACTOR","instance","contract","require","USDC","rewardAsset","Aave_stkAAVE","aave","AAVE","weth","WETH","healthFactor","totalCollateralETH","totalCollateralValue","totalDebtETH","totalDebtValue","sub","lt","severity","Critical","getPositionData","posData","getBalanceReward","atoken","Aave_aUSDC","owner","claimRewardsToOwner","CompoundLoop","WARN_LIQUIDITY_PERCENT_OF_PRINCIPAL","COMP","borrowBalance","supplyBalance","accountLiquidity","accountShortfall","minLiquidity","divn","ctoken","Compound_cUSDC","exchangeRateCurrent","balanceOfUnderlying","borrowBalanceCurrent","getAccountLiquidityWithInterest","exchangeRate","underlyingBalance","liquidity","to18","claimAndTransferAllCompToOwner","Loops","SingleVault","RevaStake","REVA","erc20","revault","chef","reva","pendingValue","pendingReva","pendingRevaValue","vaultId","vaultHarvestPayload","findVault","vault","principal","payload","harvestVault","returnedRevaAmount","returnedTokenAmount","tokens","info","tvlBusd","supportedVaults","abi","encodeFunctionSignature","vaults","userVaultPrincipal","staking","pendingAmount","userPoolInfo","poolInfo","Revault","uPunks","lp","uJenny","XUnicFarm","strategy","xfarm","unic","xunic","amountAsset","amountETH","valueAsset","valueETH","pendingxUNICs","getxUNICRate","xunicrate","totalLPTokens","Unicly","XFodlStake","fodl","xfodl","then","myXfodl","xfodlTotalSupply","fodlStaked","Fodl","TokenBalance","mcap","nativeTokens","WMATIC","WAVAX","NativeTokenBalance","getBalance","forEach","input","TokenBalances","maxUint128","pow","subn","positionGraph","posId","position","pool","totalValueLockedUSD","principal0","depositedToken0","withdrawnToken0","principal1","depositedToken1","withdrawnToken1","collectedFees0","collectedFeesToken0","collectedFees1","collectedFeesToken1","tick","V3LP","WBTC","token1","IL_WARN","nftPositionManager","valueIfHodl","valueNow","ilValue","il","pending0","pending1","pendingValue0","pendingValue1","totalFeesValue","gt","High","pos","decreaseLiquidity","maxUint256","res","graph","principalValue0","principalValue1","add","collect","collectedValue0","collectedValue1","Uniswap","AssetPosition","zeroAddress","OffChain","LYF","WETHe","baseToken","alphaHomoraBank","maxHistoryBlocks","supply0","supply1","borrow0","borrow1","ilAmount","debtRatio","getPositionInfo","lpSupplied","collateralSize","nft","collToken","getUnderlyingToken","collId","totalLPs","share","total0","total1","getPositionDebts","debts","indexOf","totalValue0","totalValue1","AlphaHomora","DAI","USDT","overridePrice","balToken","bal","amounts","values","getPool","x","bpt","getPoolTokens","poolTokens","every","eqIgnoreCase","bptBalance","bptTotalSupply","balances","poolAmounts","poolValues","reduce","sum","b","Balancer","esdt","USDC_EGLD","assets","farm","L_USDC_EGLD","MEX_EGLD","L_MEX_EGLD","mex","lpBalanceStaked","getESDTs","getTotalSupply","farmEsdts","pairEsdts","totalLPSupply","totalLPStaked","tokenIdentifier","balance","asset0InPair","asset1InPair","asset0TotalValue","asset1TotalValue","esdts","lpNameSuffix","split","lps","MexFarm","MEX","L_MEX","totalAssetStaked","farmNftWrapper","creator","decimals","dec","get","ElrondMaiar","FarmStrategies","MexFarmStrategies","reward","pendingTokens","lpTotalSupply","lpAmount","pendingJoe","TraderJoe","ThetaVault","vaultAddress","strike","depositReceipts","unredeemedShares","liquidityGauge","pricePerShare","fbalance","fratio","staked","totalBalance","total","currentOption","bn9","Ribbon","Staking","looks","calculateSharesValueInLOOKS","calculatePendingRewards","stakedLooks","pendingEth","totalShares","calculateSharePriceInLOOKS","tvlAmount","LooksRare","Sushiswap_Masterchef","pendingSushi","SushiSwap","Strategies","STORAGE_KEY","loadPositionsFromStorage","parse","localStorage","getItem","savePositionsToStorage","setItem","AllPositionsState","load","api","addPosition","create","update","newArgs","delete","sendTransaction","harvest","warmup","shouldLoad","loaded","catch","useAllPositionsActions","useAllPositionRows","createSelector","sortBy","chain","health","marketValue","num","useAllPositions","useAllPositionsValuePerPosition","Math","round","rows","sorted","r","labels","useAllPositionsValuePerAssetClass","reduced","ext","includes","assetClass","key","ac","useAllPositionsValuePerChain","grouped","totalPerChain","totalMarketValue","grandtotal","to3","PositionDialogState","useLegacy","selectedMethod","selectedMethodArgs","showPosition","closeDialog","selectMethod","setMethodArg","index","arg","setUseLegacy","callContract","usePositionDialogActions","usePositionDialogSelector","m","endsWith","substring","fmtData","positionMethods","selectedMethodArgTypes","rewardAssets","rawData","isArray","BN","fmt18","AddPositionDialogState","show","valid","allTypes","sort","setType","isValidArgs","setAddress","setInput","setName","useAddPositionDialog","AddPositionBtn","isConnected","Button","onClick","AddPositionDialog","appActions","allPositionActions","close","Dialog","open","onClose","DialogTitle","minWidth","DialogContent","FormControl","fullWidth","InputLabel","Select","label","MenuItem","TextField","variant","DialogActions","size","ChartJS","ArcElement","Tooltip","Legend","columns","field","headerName","headerAlign","width","align","valueFormatter","commafy","toFixed","sortable","AllPositionsTable","appState","positionDialogActions","totalValuesPerChain","valuesPerPosition","valuesPerAssetClass","useEffect","height","ListItemText","datasets","backgroundColor","colorOf","responsive","plugins","legend","DataGrid","onCellClick","autoHeight","hideFooter","bgColors","PositionDialog","appStateActions","allPositionsActions","DialogContentText","argType","autoFocus","FormGroup","FormControlLabel","control","Switch","checked","memAlert","AlertDialog","whiteSpace","exportPositionsJson","fileName","fileType","blob","Blob","document","createElement","download","href","URL","createObjectURL","dispatchEvent","MouseEvent","view","bubbles","cancelable","remove","downloadFile","Date","toISOString","importPositionsJson","accept","hidden","addEventListener","file","files","reader","FileReader","onload","str","location","reload","readAsText","ImportExport","ButtonGroup","darkTheme","createTheme","palette","mode","Loading","Backdrop","sx","color","zIndex","theme","modal","CircularProgress","ReactDOM","render","StrictMode","path","component","ThemeProvider","className","paddingTop","marginTop","src","OrbsLogo","alt","DeFiLogo","LI1","LI2","LI3","LI4","LI5","DotLine","maxWidth","left","top","Geom1","Geom2","getElementById"],"mappings":"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","file":"static/js/main.2f925cd0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/orbs.edf8d68f.png\";","export default __webpack_public_path__ + \"static/media/logo.c2738899.svg\";","export default __webpack_public_path__ + \"static/media/list-icon1.18bcd298.svg\";","export default __webpack_public_path__ + \"static/media/list-icon2.4b928706.svg\";","export default __webpack_public_path__ + \"static/media/list-icon3.596f4d83.svg\";","export default __webpack_public_path__ + \"static/media/list-icon4.cd9ac7ff.svg\";","export default __webpack_public_path__ + \"static/media/list-icon5.5be90266.svg\";","export default __webpack_public_path__ + \"static/media/dotted-line.a7040ce9.svg\";","export default __webpack_public_path__ + \"static/media/geom1.75a84b0d.png\";","export default __webpack_public_path__ + \"static/media/geom2.3a3b2e04.png\";","import _ from \"lodash\";\nimport { account, bn, contracts as contractsOrig, erc20abi, erc20s as erc20sOrig, networks as networksOrig, web3 } from \"@defi.org/web3-candies\";\nimport { ContractCallContext, Multicall } from \"ethereum-multicall\";\n\nexport const erc20s = _.merge({}, erc20sOrig, {});\nexport const contracts = _.merge({}, contractsOrig, {});\n\nexport const networks = _.merge({}, networksOrig, {\n  egld: { id: -508, name: \"Elrond\", shortname: \"egld\" },\n  off: { id: -1, name: \"OffChain\", shortname: \"off\" },\n});\n\nexport async function currentNetwork() {\n  const netId = bn((window as any).ethereum.chainId, 16).toNumber();\n  console.log(\"detected networkId\", netId);\n  return _.find(networks, (n) => n.id === netId);\n}\n\nexport async function sendWithTxType(tx: any, useLegacyTx: boolean) {\n  await tx.send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" });\n}\n\nexport async function performMulticallBalanceOf(wallet: string, tokens: string[]) {\n  if (!tokens.length) return [];\n  try {\n    const multicall = new Multicall({ web3Instance: web3(), tryAggregate: true });\n    const calls = _.map(\n      tokens,\n      (t) =>\n        ({\n          reference: t,\n          contractAddress: t,\n          abi: erc20abi,\n          calls: [{ reference: t, methodName: \"balanceOf\", methodParameters: [wallet] }],\n        } as ContractCallContext)\n    );\n    const result = await multicall.call(calls);\n\n    return _.map(result.results, (v) => {\n      const t = _.find(tokens, (t) => t === v.callsReturnContext[0].reference)!;\n      return { address: t, balance: bn(v.callsReturnContext[0].returnValues[0].hex || \"\", 16) };\n    });\n  } catch (e) {\n    return tokens;\n  }\n}\n","import Web3 from \"web3\";\nimport { createHook, createStore } from \"react-sweet-state\";\nimport { account, Network, setWeb3Instance } from \"@defi.org/web3-candies\";\nimport { currentNetwork, networks } from \"../positions/base/consts\";\n\n// defaults.middlewares.add((storeState: any) => (next: any) => (arg: any) => {\n//   const result = next(arg);\n//   console.log(storeState.key, \":\", storeState.getState());\n//   return result;\n// });\n\nexport function isNetworkDisabled(network?: Network) {\n  return !network || network.id < 0;\n}\n\nconst AppState = createStore({\n  name: \"AppState\",\n\n  initialState: {\n    allNetworks: networks,\n    loading: false,\n    wallet: \"\",\n    network: null as Network | null,\n    alertDialog: \"\",\n  },\n\n  actions: {\n    withLoading:\n      (thunk: () => any) =>\n      async ({ setState }) => {\n        await _withLoading(setState, thunk);\n      },\n\n    showAlert:\n      (alert: string) =>\n      async ({ setState }) => {\n        setState({ alertDialog: alert });\n      },\n\n    clickNetwork:\n      (networkId: number) =>\n      async ({ setState, getState }) => {\n        await _withLoading(setState, async () => {\n          if (!_ethereum()) {\n            alert(\"install metamask\");\n            return;\n          }\n\n          _ethereum().removeAllListeners();\n          _ethereum().on(\"chainChanged\", async () => {\n            await _onConnect(setState);\n          });\n\n          await _ethereum().request({ method: \"eth_requestAccounts\" });\n\n          await _switchNetwork(networkId);\n\n          if (!getState().network || getState().network?.id === networkId) {\n            await _onConnect(setState);\n          }\n        });\n      },\n  },\n});\n\nfunction _ethereum() {\n  return (window as any).ethereum;\n}\n\nasync function _withLoading(setState: any, t: () => Promise<void>) {\n  try {\n    setState({ loading: true });\n    await t();\n  } catch (e: any) {\n    alert(`${e.message} ${e.stack}`);\n  } finally {\n    setState({ loading: false });\n  }\n}\n\nasync function _onConnect(setState: any) {\n  setState({ wallet: \"\", network: null });\n\n  setWeb3Instance(new Web3(_ethereum()));\n  const wallet = await account();\n  const network = await currentNetwork();\n  console.log(\"onConnect: network\", network);\n\n  if (isNetworkDisabled(network)) throw new Error(`network ${network?.name} not supported yet`);\n\n  setState({ wallet, network });\n}\n\nasync function _switchNetwork(networkId: number) {\n  try {\n    await _ethereum().request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: Web3.utils.numberToHex(networkId) }],\n    });\n  } catch (switchError) {\n    // This error code indicates that the chain has not been added to MetaMask.\n    // if (switchError.code === 4902) {\n    //   try {\n    //     await ethereum.request({\n    //       method: \"wallet_addEthereumChain\",\n    //       params: [{ chainId: network.id, rpcUrl: network. }],\n    //     });\n    //   } catch (addError) {\n    //     // handle \"add\" error\n    //   }\n    // }\n    // handle other \"switch\" errors\n  }\n}\n\nexport const useAppState = createHook(AppState);\nexport const useIsAppConnected = createHook(AppState, {\n  selector: (state) => Web3.utils.isAddress(state.wallet) && !!state.network?.id,\n});\nexport const useIsLoading = createHook(AppState, {\n  selector: (state) => state.loading,\n});\nexport const useAppActions = createHook(AppState, {\n  selector: null,\n});\n","import _ from \"lodash\";\nimport { Position, PositionArgs } from \"./Position\";\nimport { PriceOracle } from \"./PriceOracle\";\nimport { Network, web3 } from \"@defi.org/web3-candies\";\n\ntype Factory = (args: PositionArgs, oracle: PriceOracle) => Position;\n\nconst registry = {} as Record<string, Factory>;\n\nexport namespace PositionFactory {\n  export const oracle = new PriceOracle();\n\n  export function register(types: Record<string, Factory>) {\n    _.merge(registry, types);\n  }\n\n  export function allTypes() {\n    return _.keys(registry);\n  }\n\n  export function create(args: PositionArgs): Position | null {\n    if (!registry[args.type]) return null;\n\n    if (!args.id) args.id = _.uniqueId(args.type + \":\" + args.address + \"-\" + args.name + \"-\");\n\n    return registry[args.type](args, oracle);\n  }\n\n  export function shouldLoad(p: Position, current: Network) {\n    return p.getNetwork().id === current.id || p.getNetwork().id < 0; // non-web3 network\n  }\n\n  export function isValidWallet(address: string) {\n    return web3()?.utils?.isAddress(address) || isElrondAddress(\"egld:\", address);\n  }\n\n  export function isValidArgs(type: string, address: string) {\n    return !!type && (web3()?.utils?.isAddress(address) || isElrondAddress(type, address) || isOffChainSymbol(type, address));\n  }\n\n  function isElrondAddress(type: string, address: string) {\n    try {\n      return type.startsWith(\"egld:\") && address.startsWith(\"erd1\");\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function isOffChainSymbol(type: string, address: string) {\n    try {\n      return type.startsWith(\"x:OffChain:Asset\") && _.trim(address).length > 0;\n    } catch (e) {\n      return false;\n    }\n  }\n}\n","import { Position, PositionArgs } from \"./base/Position\";\nimport { bn, contracts, erc20s, Token, zero } from \"@defi.org/web3-candies\";\nimport type { PancakeswapLPAbi } from \"@defi.org/web3-candies/typechain-abi/PancakeswapLPAbi\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport _ from \"lodash\";\nimport { networks, sendWithTxType } from \"./base/consts\";\nimport { PositionFactory } from \"./base/PositionFactory\";\n\nexport namespace Pancakeswap {\n  // const POOL_ID_MAPPING_URL = \"https://raw.githubusercontent.com/pancakeswap/pancake-frontend/master/src/config/constants/farms.ts\";\n\n  export function register() {\n    PositionFactory.register({\n      \"bsc:Pancakeswap:Farm:BUSD/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.BUSD(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_BUSD_BNB(), 252),\n      \"bsc:Pancakeswap:Farm:CAKE/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.CAKE(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_CAKE_BNB(), 251),\n      \"bsc:Pancakeswap:Farm:ORBS/BUSD\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.ORBS(), erc20s.bsc.BUSD(), erc20s.bsc.Pancakeswap_LP_ORBS_BUSD(), 416),\n      \"bsc:Pancakeswap:Farm:BTCB/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.BTCB(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_BTCB_BNB(), 262),\n      \"bsc:Pancakeswap:Farm:DOT/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.DOT(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_DOT_BNB(), 255),\n      \"bsc:Pancakeswap:Farm:ADA/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.ADA(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_ADA_BNB(), 253),\n      \"bsc:Pancakeswap:Farm:LINK/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.LINK(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_LINK_BNB(), 257),\n      \"bsc:Pancakeswap:Farm:DOGE/BNB\": (args, oracle) => new Farm(args, oracle, erc20s.bsc.DOGE(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_DOGE_BNB(), 376),\n    });\n  }\n\n  class Farm implements Position {\n    masterchef = contracts.bsc.Pancakeswap_Masterchef();\n    cake = erc20s.bsc.CAKE();\n\n    data = {\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      tvl: zero,\n    };\n\n    constructor(\n      public args: PositionArgs,\n      public oracle: PriceOracle,\n      public asset0: Token,\n      public asset1: Token,\n      public lpToken: Token & PancakeswapLPAbi,\n      public poolId: number\n    ) {}\n\n    getName = () => ``;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => networks.bsc;\n\n    getAssets = () => [this.asset0, this.asset1];\n\n    getRewardAssets = () => [this.cake];\n\n    getData = () => this.data;\n\n    getHealth = () => [];\n\n    getAmounts = () => [\n      {\n        asset: this.asset0,\n        amount: this.data.amount0,\n        value: this.data.value0,\n      },\n      {\n        asset: this.asset1,\n        amount: this.data.amount1,\n        value: this.data.value1,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.cake,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getTVL = () => this.data.tvl;\n\n    async load() {\n      const [userInfo, reserves, token0, totalSupply, pending, lpStaked] = await Promise.all([\n        this.masterchef.methods.userInfo(this.poolId, this.args.address).call(),\n        this.lpToken.methods.getReserves().call(),\n        this.lpToken.methods.token0().call(),\n        this.lpToken.methods.totalSupply().call(),\n        this.masterchef.methods.pendingCake(this.poolId, this.args.address).call(),\n        this.lpToken.methods.balanceOf(this.masterchef.options.address).call(),\n      ]);\n      const { _reserve0, _reserve1 } = reserves;\n      const r0 = token0.toLowerCase() === this.asset0.address.toLowerCase() ? _reserve0 : _reserve1;\n      const r1 = r0 === _reserve0 ? _reserve1 : _reserve0;\n      const amountLP = bn(userInfo.amount);\n      this.data.rewardAmount = bn(pending);\n\n      this.data.amount0 = await this.asset0.mantissa(bn(r0).mul(amountLP).div(bn(totalSupply)));\n      this.data.amount1 = await this.asset1.mantissa(bn(r1).mul(amountLP).div(bn(totalSupply)));\n\n      [this.data.value0, this.data.value1, this.data.rewardValue, this.data.tvl] = await Promise.all([\n        this.oracle.valueOf(this.getNetwork().id, this.asset0, this.data.amount0),\n        this.oracle.valueOf(this.getNetwork().id, this.asset1, this.data.amount1),\n        this.oracle.valueOf(this.getNetwork().id, this.cake, this.data.rewardAmount),\n        this.oracle.valueOf(this.getNetwork().id, this.asset1, bn(r1).muln(2).mul(bn(lpStaked)).div(bn(totalSupply))),\n      ]);\n    }\n\n    getContractMethods = () => _.functions(this.masterchef.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[]) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      alert(`target:\\n${this.masterchef.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, true);\n    }\n\n    async harvest() {\n      await sendWithTxType(this.masterchef.methods.deposit(this.poolId, 0), true);\n    }\n  }\n}\n","import BN from \"bn.js\";\nimport { Network, Token } from \"@defi.org/web3-candies\";\n\nexport type PositionArgs = {\n  type: string;\n  address: string;\n  id: string;\n  input?: string;\n  name?: string;\n};\n\nexport interface Position {\n  getName(): string;\n  getArgs(): PositionArgs;\n  getNetwork(): Network;\n  getAssets(): Token[];\n  getRewardAssets(): Token[];\n\n  // TODO getGovernance\n  load(): Promise<void>;\n  getData(): { [key: string]: BN | string | number | BN[] };\n\n  getHealth(): Threat[];\n  getAmounts(): TokenAmount[];\n  getPendingRewards(): TokenAmount[];\n  getTVL(): BN;\n  // getAPR(): BN;\n\n  getContractMethods(): string[];\n  callContract(method: string, args: string[]): Promise<any>;\n  sendTransaction(method: string, args: string[], useLegacyTx: boolean): Promise<void>;\n  harvest(useLegacyTx: boolean): Promise<void>;\n}\n\nexport interface TokenAmount {\n  asset: Token;\n  /**\n   * ERC20 amount\n   */\n  amount: BN;\n  /**\n   * USD, 18 decimals\n   */\n  value: BN;\n}\n\nexport enum Severity {\n  Critical,\n  High,\n  Medium,\n  Low,\n}\n\nexport interface Threat {\n  severity: Severity;\n  message: string;\n}\n","import { Position, PositionArgs, Severity } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, bn18, contract, erc20s, ether, to18, zero } from \"@defi.org/web3-candies\";\nimport type { AaveLoopAbi } from \"../../typechain-abi/AaveLoopAbi\";\nimport type { CompoundLoopAbi } from \"../../typechain-abi/CompoundLoopAbi\";\nimport _ from \"lodash\";\nimport { networks, sendWithTxType } from \"./base/consts\";\n\nexport namespace Loops {\n  /**\n   * Aave on Ethereum\n   */\n  export class AaveLoop implements Position {\n    WARN_HEALTH_FACTOR = bn18(\"1.0641\");\n\n    instance = contract<AaveLoopAbi>(require(\"../abi/AaveLoopAbi.json\"), this.args.address);\n    asset = erc20s.eth.USDC();\n    rewardAsset = erc20s.eth.Aave_stkAAVE();\n    aave = erc20s.eth.AAVE();\n    weth = erc20s.eth.WETH();\n\n    data = {\n      healthFactor: zero,\n      totalCollateralETH: zero,\n      totalCollateralValue: zero,\n      totalDebtETH: zero,\n      totalDebtValue: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {}\n\n    getName = () => ``;\n\n    getArgs() {\n      return this.args;\n    }\n\n    getNetwork() {\n      return networks.eth;\n    }\n\n    getAssets() {\n      return [this.asset];\n    }\n\n    getRewardAssets() {\n      return [this.rewardAsset];\n    }\n\n    getData = () => this.data;\n\n    getHealth() {\n      if (!this.data.healthFactor.isZero() && this.data.healthFactor.lt(this.WARN_HEALTH_FACTOR)) {\n        return [\n          {\n            severity: Severity.Critical,\n            message: \"Low Health Factor!\",\n          },\n        ];\n      }\n      return [];\n    }\n\n    getAmounts = () => [\n      {\n        asset: this.asset,\n        amount: this.data.totalCollateralETH.sub(this.data.totalDebtETH),\n        value: this.data.totalCollateralValue.sub(this.data.totalDebtValue),\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.rewardAsset,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getTVL = () => this.data.tvl;\n\n    async load() {\n      const posData = await this.instance.methods.getPositionData().call();\n      this.data.healthFactor = bn(posData.healthFactor);\n      this.data.totalCollateralETH = bn(posData.totalCollateralETH);\n      this.data.totalDebtETH = bn(posData.totalDebtETH);\n\n      this.data.totalCollateralValue = await this.oracle.valueOf(this.getNetwork().id, this.weth, this.data.totalCollateralETH);\n      this.data.totalDebtValue = await this.oracle.valueOf(this.getNetwork().id, this.weth, this.data.totalDebtETH);\n      this.data.rewardAmount = bn(await this.instance.methods.getBalanceReward().call());\n      this.data.rewardValue = await this.oracle.valueOf(this.getNetwork().id, this.aave, this.data.rewardAmount);\n\n      const atoken = erc20s.eth.Aave_aUSDC();\n      this.data.tvl = await this.oracle.valueOf(this.getNetwork().id, this.asset, await atoken.mantissa(await atoken.methods.totalSupply().call()));\n    }\n\n    getContractMethods = () => _.functions(this.instance.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.instance.methods as any)[method](...args);\n      return await tx.call({ from: await this.instance.methods.owner().call() });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.instance.methods as any)[method](...args);\n      alert(`target:\\n${this.instance.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await sendWithTxType(this.instance.methods.claimRewardsToOwner(), useLegacyTx);\n    }\n  }\n\n  /**\n   * Compound on ethereum\n   */\n  export class CompoundLoop implements Position {\n    WARN_LIQUIDITY_PERCENT_OF_PRINCIPAL = 0.005; // percent of total supply 0.25% => ex. $10M principal, $40M supply, $100k min liquidity\n\n    instance = contract<CompoundLoopAbi>(require(\"../abi/CompoundLoopAbi.json\"), this.args.address);\n    asset = erc20s.eth.USDC();\n    rewardAsset = erc20s.eth.COMP();\n\n    data = {\n      borrowBalance: zero,\n      supplyBalance: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      accountLiquidity: zero,\n      accountShortfall: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {}\n\n    getName = () => ``;\n\n    getArgs() {\n      return this.args;\n    }\n\n    getNetwork() {\n      return networks.eth;\n    }\n\n    getAssets() {\n      return [this.asset];\n    }\n\n    getRewardAssets() {\n      return [this.rewardAsset];\n    }\n\n    getData = () => this.data;\n\n    getAmounts = () => [\n      {\n        asset: this.asset,\n        amount: this.data.supplyBalance.sub(this.data.borrowBalance),\n        value: this.data.supplyBalance.sub(this.data.borrowBalance),\n      },\n    ];\n\n    getTVL = () => this.data.tvl;\n\n    getPendingRewards = () => [\n      {\n        asset: this.rewardAsset,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getHealth() {\n      const minLiquidity = this.data.supplyBalance.muln(this.WARN_LIQUIDITY_PERCENT_OF_PRINCIPAL).divn(100);\n      if (!this.data.accountShortfall.isZero() || bn(this.data.accountLiquidity).lt(minLiquidity)) {\n        return [\n          {\n            severity: Severity.Critical,\n            message: \"Low Liquidity!\",\n          },\n        ];\n      }\n      return [];\n    }\n\n    async load() {\n      const ctoken = erc20s.eth.Compound_cUSDC();\n      const [totalSupply, exchangeRate, underlyingBalance, borrowBalance, pending, liquidity] = await Promise.all([\n        ctoken.methods.totalSupply().call(),\n        ctoken.methods.exchangeRateCurrent().call(),\n        ctoken.methods.balanceOfUnderlying(this.args.address).call(),\n        this.instance.methods.borrowBalanceCurrent().call(),\n        this.instance.methods[\"claimComp()\"]().call(),\n        this.instance.methods.getAccountLiquidityWithInterest().call(),\n      ]);\n\n      this.data.supplyBalance = await this.asset.mantissa(underlyingBalance);\n      this.data.borrowBalance = await this.asset.mantissa(borrowBalance);\n      this.data.rewardAmount = bn(pending);\n      this.data.rewardValue = await this.oracle.valueOf(this.getNetwork().id, this.rewardAsset, this.data.rewardAmount);\n      this.data.accountLiquidity = bn(liquidity.accountLiquidity);\n      this.data.accountShortfall = bn(liquidity.accountShortfall);\n\n      this.data.tvl = (await ctoken.mantissa(totalSupply)).mul(to18(exchangeRate, 16)).div(ether);\n    }\n\n    getContractMethods = () => _.functions(this.instance.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.instance.methods as any)[method](...args);\n      return await tx.call({ from: await this.instance.methods.owner().call() });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.instance.methods as any)[method](...args);\n      alert(`target:\\n${this.instance.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await sendWithTxType(this.instance.methods.claimAndTransferAllCompToOwner(), useLegacyTx);\n    }\n  }\n}\n","import React from \"react\";\nimport { isNetworkDisabled, useAppState } from \"../state/AppState\";\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport _ from \"lodash\";\n\nexport const AppHeader = () => {\n  const [state, actions] = useAppState();\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", margin: 24 }}>\n      <ToggleButtonGroup value={state.network?.id} exclusive onChange={(p: any) => actions.clickNetwork(parseInt(p.target.value))}>\n        {_.map(state.allNetworks, (network) => (\n          <ToggleButton value={network.id} key={network.shortname} style={{ textTransform: \"none\" }} disabled={isNetworkDisabled(network)}>\n            {network.name}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n    </div>\n  );\n};\n","import _ from \"lodash\";\nimport BN from \"bn.js\";\nimport { bn18, ether, Token, web3, zero } from \"@defi.org/web3-candies\";\nimport { Position } from \"./Position\";\nimport { ElrondMaiar } from \"../ElrondMaiar\";\nimport { networks } from \"./consts\";\nimport { OffChain } from \"../OffChain\";\n\nconst coingeckoIds = {\n  [networks.eth.id]: \"ethereum\",\n  [networks.bsc.id]: \"binance-smart-chain\",\n  [networks.poly.id]: \"polygon-pos\",\n  [networks.arb.id]: \"arbitrum-one\",\n  [networks.avax.id]: \"avalanche\",\n};\n\nexport class PriceOracle {\n  warm = false;\n  prices: Record<string, BN> = {\n    USD: ether,\n  };\n\n  getId(networkId: number, token: Token) {\n    if (networkId === networks.egld.id) return (token as ElrondMaiar.ESDT).tokenId;\n    if (networkId === networks.off.id) return (token as OffChain.Asset).symbol;\n    return token.address;\n  }\n\n  overridePrice(networkId: number, token: Token, price: BN) {\n    this.prices[this.getId(networkId, token)] = price;\n  }\n\n  async valueOf(networkId: number, token: Token, amount: BN): Promise<BN> {\n    const id = this.getId(networkId, token);\n\n    if (!this.prices[id] || this.prices[id].isZero()) {\n      if (networkId === networks.egld.id) await this.fetchPricesElrond([id]);\n      else await this.fetchPrices(networkId, [id]);\n    }\n\n    if (!this.prices[id]) {\n      console.log(`no price for ${token.name} ${token.address} for amount ${amount.toString()} on ${networkId}`);\n      return zero;\n    }\n\n    return amount.mul(this.prices[id]).div(ether);\n  }\n\n  async warmup(positions: Position[]) {\n    if (this.warm) return;\n    this.warm = true;\n    const bynetwork = _.groupBy(positions, (p) => p.getNetwork().id);\n    console.log(\"warming up prices for\", bynetwork);\n\n    const coingeckoFetches = _(bynetwork)\n      .keys()\n      .filter((id) => parseInt(id) > 0)\n      .map((id) =>\n        this.fetchPrices(\n          id,\n          _(bynetwork[id])\n            .map((p) => p.getAssets().concat(p.getRewardAssets()))\n            .flatten()\n            .map((a) => a.address)\n            .uniq()\n            .value()\n        )\n      )\n      .value();\n\n    const elrondFetch = this.fetchPricesElrond(\n      _(bynetwork[networks.egld.id])\n        .map((p) => p.getAssets().concat(p.getRewardAssets()))\n        .flatten()\n        .map((a) => (a as any).tokenId)\n        .uniq()\n        .value()\n    );\n\n    await Promise.all([...coingeckoFetches, elrondFetch]);\n  }\n\n  /**\n   * returns price in USD 18 decimals by token address\n   */\n  async fetchPrices(networkId: number | string, addresses: string[]): Promise<{ [address: string]: BN }> {\n    if (_.isEmpty(addresses)) return {};\n    console.log(\"fetchPrices\", addresses);\n\n    try {\n      const coingeckoId = _.find(coingeckoIds, (v, k) => k === networkId.toString())!;\n      const url = `https://api.coingecko.com/api/v3/simple/token_price/${coingeckoId}?contract_addresses=${addresses.join(\",\")}&vs_currencies=usd`;\n      const response = await fetch(url);\n      const json = (await response.json()) as Record<string, any>;\n\n      const result = _(json)\n        .mapKeys((v, k) => web3().utils.toChecksumAddress(k))\n        .mapValues((v) => bn18(v.usd))\n        .value();\n\n      return this.updateResults(addresses, result);\n    } catch (e) {\n      return {};\n    }\n  }\n\n  /**\n   * returns price in USD 18 decimals by token ID\n   */\n  async fetchPricesElrond(tokenIds: string[]): Promise<{ [address: string]: BN }> {\n    if (_.isEmpty(tokenIds)) return {};\n    console.log(\"fetchPricesElrond\", tokenIds);\n\n    try {\n      const body = {\n        variables: _.mapKeys(tokenIds, (id, i) => `token${i}`),\n        query: `query (${_.map(tokenIds, (id, i) => `$token${i}: String!`).join(\", \")}) {\n              ${_.map(tokenIds, (id, i) => `token${i}: getTokenPriceUSD(tokenID: $token${i})`).join(\"\\n\")}\n            }`,\n      };\n\n      const response = await fetch(\"https://graph.maiar.exchange/graphql\", {\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n        body: JSON.stringify(body),\n        method: \"POST\",\n      });\n      const json = await response.json();\n\n      const result = _(json.data)\n        .mapKeys((v, k) => body.variables[k])\n        .mapValues((v) => bn18(v))\n        .value();\n\n      return this.updateResults(tokenIds, result);\n    } catch (e) {\n      return {};\n    }\n  }\n\n  updateResults(inputs: any, results: { [p: string]: BN }) {\n    if (_.isEmpty(results)) throw new Error(`no price for ${inputs}`);\n    return _.merge(this.prices, results);\n  }\n}\n","import { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, contract, erc20, Token, web3, zero } from \"@defi.org/web3-candies\";\nimport { erc20s, networks, sendWithTxType } from \"./base/consts\";\nimport _ from \"lodash\";\nimport type { RevaultFarmAbi } from \"../../typechain-abi/RevaultFarmAbi\";\nimport type { RevaultChefAbi } from \"../../typechain-abi/RevaultChefAbi\";\nimport type { RevaultStakingAbi } from \"../../typechain-abi/RevaultStakingAbi\";\nimport { PositionFactory } from \"./base/PositionFactory\";\n\nexport namespace Revault {\n  export function register() {\n    PositionFactory.register({\n      \"bsc:Revault:SingleVault:CAKE\": (args, oracle) => new SingleVault(args, oracle, erc20s.bsc.CAKE()),\n      \"bsc:Revault:SingleVault:BUSD\": (args, oracle) => new SingleVault(args, oracle, erc20s.bsc.BUSD()),\n      \"bsc:Revault:SingleVault:BNB\": (args, oracle) => new SingleVault(args, oracle, erc20s.bsc.WBNB()),\n    });\n    for (let i = 0; i < 4; i++) {\n      PositionFactory.register({\n        [`bsc:Revault:RevaStaking:x${i + 1}`]: (args, oracle) => new RevaStake(args, oracle, i),\n      });\n    }\n  }\n\n  const REVA = () => erc20(\"REVA\", \"0x4FdD92Bd67Acf0676bfc45ab7168b3996F7B4A3B\");\n  const revaultFarm = () => contract<RevaultFarmAbi>(require(\"../abi/RevaultFarmAbi.json\"), \"0x2642fa04bd1f7250be6539c5bDa36335333d9Ccd\");\n  const revaultChef = () => contract<RevaultChefAbi>(require(\"../abi/RevaultChefAbi.json\"), \"0xd7550285532f1642511b16Df858546F2593d638B\");\n  const revaStaking = () => contract<RevaultStakingAbi>(require(\"../abi/RevaultStakingAbi.json\"), \"0x8B7b2a115201ACd7F95d874D6A9432FcEB9C466A\");\n\n  class SingleVault implements Position {\n    revault = revaultFarm();\n    chef = revaultChef();\n    reva = REVA();\n\n    data = {\n      amount: zero,\n      value: zero,\n      pending: zero,\n      pendingValue: zero,\n      pendingReva: zero,\n      pendingRevaValue: zero,\n      tvl: zero,\n      vaultId: 0,\n      vaultHarvestPayload: \"\",\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public asset: Token) {}\n\n    getName = () => ``;\n\n    getNetwork = () => networks.bsc;\n\n    getArgs = () => this.args;\n\n    getData = () => this.data;\n\n    getAssets = () => [this.asset];\n\n    getRewardAssets = () => [this.asset, this.reva];\n\n    getHealth = () => [];\n\n    getTVL = () => this.data.tvl;\n\n    getAmounts = () => [{ asset: this.asset, amount: this.data.amount, value: this.data.value }];\n\n    getPendingRewards = () => [\n      { asset: this.asset, amount: this.data.pending, value: this.data.pendingValue },\n      { asset: this.reva, amount: this.data.pendingReva, value: this.data.pendingRevaValue },\n    ];\n\n    async load() {\n      const vault = await this.findVault();\n      this.data.vaultId = vault.id;\n      this.data.amount = vault.principal;\n      this.data.vaultHarvestPayload = vault.payload;\n\n      const { returnedRevaAmount, returnedTokenAmount } = await this.revault.methods\n        .harvestVault(this.data.vaultId, this.data.vaultHarvestPayload)\n        .call({ from: this.args.address });\n      this.data.pendingReva = bn(returnedRevaAmount);\n      this.data.pending = bn(returnedTokenAmount);\n\n      let info;\n      [this.data.value, this.data.pendingRevaValue, this.data.pendingValue, info] = await Promise.all([\n        this.oracle.valueOf(this.getNetwork().id, this.asset, this.data.amount),\n        this.oracle.valueOf(this.getNetwork().id, this.reva, this.data.pendingReva),\n        this.oracle.valueOf(this.getNetwork().id, this.asset, this.data.pending),\n        this.chef.methods.tokens(this.asset.address).call(),\n      ]);\n      const { tvlBusd } = info;\n      this.data.tvl = bn(tvlBusd);\n    }\n\n    private async findVault() {\n      const supportedVaults = {\n        [erc20s.bsc.WBNB().address]: { id: 0 }, // bunny\n        [erc20s.bsc.BUSD().address]: { id: 1 }, // bunny\n        [erc20s.bsc.CAKE().address]: { id: 2 }, // bunny\n      };\n      const payload = web3().eth.abi.encodeFunctionSignature(\"getReward()\"); //all bunny vaults\n      const vaultId = supportedVaults[this.asset.address].id;\n      const [vault, principal] = await Promise.all([this.revault.methods.vaults(vaultId).call(), this.revault.methods.userVaultPrincipal(vaultId, this.args.address).call()]);\n      return { ...vault, id: vaultId, principal: bn(principal), payload };\n    }\n\n    getContractMethods = () => _.functions(this.revault.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.revault.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[]) {\n      const tx = (this.revault.methods as any)[method](...args);\n      alert(`target:\\n${this.revault.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, true);\n    }\n\n    async harvest() {\n      await sendWithTxType(this.revault.methods.harvestVault(this.data.vaultId, this.data.vaultHarvestPayload), true);\n    }\n  }\n\n  class RevaStake implements Position {\n    staking = revaStaking();\n    reva = REVA();\n\n    data = {\n      amount: zero,\n      value: zero,\n      pendingAmount: zero,\n      pendingValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public poolId: number) {}\n\n    getName = () => ``;\n\n    getNetwork = () => networks.bsc;\n\n    getArgs = () => this.args;\n\n    getData = () => this.data;\n\n    getAssets = () => [this.reva];\n\n    getRewardAssets = () => [this.reva];\n\n    getHealth = () => [];\n\n    getTVL = () => this.data.tvl;\n\n    getAmounts = () => [{ asset: this.reva, amount: this.data.amount, value: this.data.value }];\n\n    getPendingRewards = () => [{ asset: this.reva, amount: this.data.pendingAmount, value: this.data.pendingValue }];\n\n    async load() {\n      const [userInfo, pending, poolInfo] = await Promise.all([\n        this.staking.methods.userPoolInfo(this.poolId, this.args.address).call(),\n        this.staking.methods.pendingReva(this.poolId, this.args.address).call(),\n        this.staking.methods.poolInfo(this.poolId).call(),\n      ]);\n      this.data.amount = bn(userInfo.amount);\n      this.data.pendingAmount = bn(pending);\n      [this.data.value, this.data.pendingValue, this.data.tvl] = await Promise.all([\n        this.oracle.valueOf(this.getNetwork().id, this.reva, this.data.amount),\n        this.oracle.valueOf(this.getNetwork().id, this.reva, this.data.pendingAmount),\n        this.oracle.valueOf(this.getNetwork().id, this.reva, bn(poolInfo.totalSupply)),\n      ]);\n    }\n\n    getContractMethods = () => _.functions(this.staking.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.staking.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[]) {\n      const tx = (this.staking.methods as any)[method](...args);\n      alert(`target:\\n${this.staking.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, true);\n    }\n\n    async harvest() {}\n  }\n}\n","import _ from \"lodash\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { bn, contract, erc20, ether, Token, zero } from \"@defi.org/web3-candies\";\nimport { erc20s, networks, sendWithTxType } from \"./base/consts\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport type { UniclyLpAbi } from \"../../typechain-abi/UniclyLpAbi\";\nimport type { UniclyXUnicAbi } from \"../../typechain-abi/UniclyXUnicAbi\";\n\nexport namespace Unicly {\n  interface Strategy {\n    asset: Token;\n    lp: Token & UniclyLpAbi;\n    poolId: number;\n  }\n\n  export const Strategies = {\n    uPunks: () => ({\n      asset: erc20(\"Unicly: uPUNK\", \"0x8d2BFfCbB19Ff14A698C424FbcDcFd17aab9b905\"),\n      lp: erc20<UniclyLpAbi>(\"Unicly: LP uPUNK/ETH\", \"0xc809Af9E3490bCB2B3bA2BF15E002f0A6a1F6835\", require(\"../abi/UniclyLpAbi.json\")),\n      poolId: 3,\n    }),\n    uJenny: () => ({\n      asset: erc20(\"Unicly: uJenny\", \"0xa499648fD0e80FD911972BbEb069e4c20e68bF22\"),\n      lp: erc20<UniclyLpAbi>(\"Unicly: LP uJenny/ETH\", \"0xEC5100AD159F660986E47AFa0CDa1081101b471d\", require(\"../abi/UniclyLpAbi.json\")),\n      poolId: 18,\n    }),\n  };\n\n  export class XUnicFarm implements Position {\n    xfarm = contract<UniclyXUnicAbi>(require(\"../abi/UniclyXUnicAbi.json\"), \"0x07306aCcCB482C8619e7ed119dAA2BDF2b4389D0\");\n    unic = erc20(\"UNIC\", \"0x94E0BAb2F6Ab1F19F4750E42d7349f2740513aD5\");\n    xunic = erc20(\"xUNIC\", \"0xA62fB0c2Fb3C7b27797dC04e1fEA06C0a2Db919a\");\n    eth = erc20s.eth.WETH();\n\n    data = {\n      amountLP: zero,\n      amountAsset: zero,\n      amountETH: zero,\n      valueAsset: zero,\n      valueETH: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public strategy: Strategy) {}\n\n    getName = () => ``;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => networks.eth;\n\n    getAssets = () => [this.strategy.asset, this.eth];\n\n    getRewardAssets = () => [this.xunic];\n\n    getData = () => this.data;\n\n    getHealth = () => [];\n\n    getAmounts = () => [\n      {\n        asset: this.strategy.asset,\n        amount: this.data.amountAsset,\n        value: this.data.valueAsset,\n      },\n      {\n        asset: this.eth,\n        amount: this.data.amountETH,\n        value: this.data.valueETH,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.xunic,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getTVL = () => this.data.tvl;\n\n    async load() {\n      const [userInfo, reserves, token0, totalSupply, pending, poolInfo, xunicrate] = await Promise.all([\n        this.xfarm.methods.userInfo(this.strategy.poolId, this.args.address).call(),\n        this.strategy.lp.methods.getReserves().call(),\n        this.strategy.lp.methods.token0().call(),\n        this.strategy.lp.methods.totalSupply().call(),\n        this.xfarm.methods.pendingxUNICs(this.strategy.poolId, this.args.address).call(),\n        this.xfarm.methods.poolInfo(this.strategy.poolId).call(),\n        this.xfarm.methods.getxUNICRate().call(),\n      ]);\n      const { _reserve0, _reserve1 } = reserves;\n      const r0 = token0.toLowerCase() === this.strategy.asset.address.toLowerCase() ? _reserve0 : _reserve1;\n      const r1 = r0 === _reserve0 ? _reserve1 : _reserve0;\n      this.data.amountLP = bn(userInfo.amount);\n      this.data.rewardAmount = await this.xunic.mantissa(pending);\n\n      this.data.amountAsset = await this.strategy.asset.mantissa(bn(r0).mul(this.data.amountLP).div(bn(totalSupply)));\n      this.data.amountETH = await this.eth.mantissa(bn(r1).mul(this.data.amountLP).div(bn(totalSupply)));\n\n      [this.data.valueAsset, this.data.valueETH, this.data.rewardValue, this.data.tvl] = await Promise.all([\n        this.oracle.valueOf(this.getNetwork().id, this.strategy.asset, this.data.amountAsset),\n        this.oracle.valueOf(this.getNetwork().id, this.eth, this.data.amountETH),\n        this.oracle.valueOf(this.getNetwork().id, this.unic, this.data.rewardAmount.mul(bn(xunicrate)).div(ether)),\n        this.oracle.valueOf(this.getNetwork().id, this.eth, bn(r1).muln(2).mul(bn(poolInfo.totalLPTokens)).div(bn(totalSupply))),\n      ]);\n    }\n\n    getContractMethods = () => _.functions(this.xfarm.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.xfarm.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.xfarm.methods as any)[method](...args);\n      alert(`target:\\n${this.xfarm.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await sendWithTxType(this.xfarm.methods.deposit(this.strategy.poolId, 0), useLegacyTx);\n    }\n  }\n}\n","import { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, erc20, zero } from \"@defi.org/web3-candies\";\nimport { networks, sendWithTxType } from \"./base/consts\";\nimport _ from \"lodash\";\n\nexport namespace Fodl {\n  export class XFodlStake implements Position {\n    fodl = erc20(\"FODL\", \"0x4C2e59D098DF7b6cBaE0848d66DE2f8A4889b9C3\");\n    xfodl = erc20(\"FODL: xFODL\", \"0x7e05540A61b531793742fde0514e6c136b5fbAfE\");\n\n    data = {\n      amount: zero,\n      value: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {}\n\n    getName = () => ``;\n\n    getNetwork = () => networks.eth;\n\n    getArgs = () => this.args;\n\n    getData = () => this.data;\n\n    getAssets = () => [this.fodl];\n\n    getRewardAssets = () => [this.xfodl];\n\n    getTVL = () => this.data.tvl;\n\n    getHealth = () => [];\n\n    getAmounts = () => [{ asset: this.fodl, amount: this.data.amount, value: this.data.value }];\n\n    getPendingRewards = () => [];\n\n    async load() {\n      const [myXfodl, xfodlTotalSupply, fodlStaked] = await Promise.all([\n        this.xfodl.methods.balanceOf(this.args.address).call().then(bn),\n        this.xfodl.methods.totalSupply().call().then(bn),\n        this.fodl.methods.balanceOf(this.xfodl.address).call().then(bn),\n      ]);\n      this.data.amount = myXfodl.mul(fodlStaked).div(xfodlTotalSupply);\n      this.data.value = await this.oracle.valueOf(this.getNetwork().id, this.fodl, this.data.amount);\n\n      this.data.tvl = await this.oracle.valueOf(this.getNetwork().id, this.fodl, fodlStaked);\n    }\n\n    getContractMethods = () => _.functions(this.xfodl.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.xfodl.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.xfodl.methods as any)[method](...args);\n      alert(`target:\\n${this.xfodl.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n","import { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, erc20, Network, Token, web3, zero } from \"@defi.org/web3-candies\";\nimport { erc20s, networks } from \"./base/consts\";\nimport _ from \"lodash\";\nimport { PositionFactory } from \"./base/PositionFactory\";\nimport Web3 from \"web3\";\n\nexport namespace TokenBalances {\n  class TokenBalance implements Position {\n    data = {\n      name: \"\",\n      amount: zero,\n      value: zero,\n      totalSupply: zero,\n      mcap: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public network: Network, public token: Token) {\n      token.name = args.name || token.name;\n    }\n\n    getName = () => this.data.name;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => this.network;\n\n    getData = () => this.data;\n\n    getAssets = () => [this.token];\n\n    getRewardAssets = () => [];\n\n    getPendingRewards = () => [];\n\n    getHealth = () => [];\n\n    async load() {\n      [this.data.name, this.data.amount, this.data.totalSupply] = await Promise.all([\n        this.token.methods.name().call(),\n        this.token.methods.balanceOf(this.args.address).call().then(this.token.mantissa),\n        this.token.methods.totalSupply().call().then(this.token.mantissa),\n      ]);\n      this.data.value = await this.oracle.valueOf(this.network.id, this.token, this.data.amount);\n      this.data.mcap = await this.oracle.valueOf(this.network.id, this.token, this.data.totalSupply);\n    }\n\n    getAmounts = () => [{ asset: this.token, amount: this.data.amount, value: this.data.value }];\n\n    getTVL = () => this.data.mcap;\n\n    getContractMethods = () => [];\n    async callContract(method: string, args: string[]) {}\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {}\n    async harvest(useLegacyTx: boolean) {}\n  }\n\n  const nativeTokens = {\n    eth: () => _.merge(erc20s.eth.WETH(), { name: \"ETH\" }),\n    bsc: () => _.merge(erc20s.bsc.WBNB(), { name: \"BNB\" }),\n    poly: () => _.merge(erc20s.poly.WMATIC(), { name: \"MATIC\" }),\n    avax: () => _.merge(erc20s.avax.WAVAX(), { name: \"AVAX\" }),\n    arb: () => _.merge(erc20s.arb.WETH(), { name: \"AETH\" }),\n  };\n\n  class NativeTokenBalance extends TokenBalance {\n    getName = () => this.token.name;\n\n    async load() {\n      [this.data.amount, this.data.totalSupply] = await Promise.all([web3().eth.getBalance(this.args.address).then(bn), this.token.methods.totalSupply().call().then(bn)]);\n      this.data.value = await this.oracle.valueOf(this.network.id, this.token, this.data.amount);\n      this.data.mcap = await this.oracle.valueOf(this.network.id, this.token, this.data.totalSupply);\n    }\n  }\n\n  export function register() {\n    _.forEach(networks, (n) => {\n      if (n.id < 0) return;\n      PositionFactory.register({\n        [`${n.shortname}:Token`]: (args, oracle) => new TokenBalance(args, oracle, n, erc20(\"\", Web3.utils.toChecksumAddress(args.input!))),\n      });\n\n      const t = (nativeTokens as any)[n.shortname];\n      if (t) PositionFactory.register({ [`${n.shortname}:TokenBase`]: (args, oracle) => new NativeTokenBalance(args, oracle, n, t()) });\n    });\n  }\n}\n","import { Position, PositionArgs, Severity } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, bn18, contract, ether, maxUint256, Network, Token, web3, zero } from \"@defi.org/web3-candies\";\nimport { PositionFactory } from \"./base/PositionFactory\";\nimport { erc20s, networks, sendWithTxType } from \"./base/consts\";\nimport type { UniswapNftManagerAbi } from \"../../typechain-abi/UniswapNftManagerAbi\";\nimport _ from \"lodash\";\n\nconst maxUint128 = bn(2).pow(bn(128)).subn(1).toString();\n\nexport namespace Uniswap {\n  export function register() {\n    PositionFactory.register({\n      \"eth:Uniswap:V3LP:WBTC/ETH\": (args, oracle) => new V3LP(args, oracle, networks.eth, erc20s.eth.WBTC(), erc20s.eth.WETH()),\n    });\n  }\n\n  class V3LP implements Position {\n    IL_WARN = bn18(1 / 100);\n\n    nftPositionManager = contract<UniswapNftManagerAbi>(require(\"../abi/UniswapNftManagerAbi.json\"), \"0xC36442b4a4522E871399CD717aBDD847Ab11FE88\");\n\n    data = {\n      id: 0,\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      tvl: zero,\n      principal0: zero,\n      principal1: zero,\n      valueIfHodl: zero,\n      valueNow: zero,\n      ilValue: zero,\n      il: zero,\n      pending0: zero,\n      pending1: zero,\n      pendingValue0: zero,\n      pendingValue1: zero,\n      totalFeesValue: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public network: Network, public token0: Token, public token1: Token) {\n      this.data.id = parseInt(args.input!) || 0;\n      if (this.data.id <= 0) throw new Error(\"unknown positionId\");\n    }\n\n    getName = () => \"\";\n    getNetwork = () => this.network;\n    getArgs = () => this.args;\n    getData = () => this.data;\n    getTVL = () => this.data.tvl;\n    getAssets = () => [this.token0, this.token1];\n    getAmounts = () => [\n      { asset: this.token0, amount: this.data.amount0, value: this.data.value0 },\n      { asset: this.token1, amount: this.data.amount1, value: this.data.value1 },\n    ];\n    getRewardAssets = () => [this.token0, this.token1];\n    getPendingRewards = () => [\n      { asset: this.token0, amount: this.data.pending0, value: this.data.pendingValue0 },\n      { asset: this.token1, amount: this.data.pending1, value: this.data.pendingValue1 },\n    ];\n    getHealth = () => {\n      if (this.data.ilValue.gt(this.data.totalFeesValue) || this.data.il.gt(this.IL_WARN))\n        return [\n          {\n            severity: Severity.High,\n            message: \"IL!\",\n          },\n        ];\n      return [];\n    };\n\n    async load() {\n      const pos = await this.nftPositionManager.methods.positions(this.data.id).call();\n      if (web3().utils.toChecksumAddress(pos.token0) !== web3().utils.toChecksumAddress(this.token0.address)) throw new Error(`invalid tokens for pos, ${pos}`);\n\n      const res = await this.nftPositionManager.methods.decreaseLiquidity([this.data.id, pos.liquidity, 0, 0, maxUint256]).call();\n      this.data.amount0 = await this.token0.mantissa(res.amount0);\n      this.data.amount1 = await this.token1.mantissa(res.amount1);\n\n      [this.data.value0, this.data.value1] = await Promise.all([\n        this.oracle.valueOf(this.network.id, this.token0, this.data.amount0),\n        this.oracle.valueOf(this.network.id, this.token1, this.data.amount1),\n      ]);\n\n      const graph = await positionGraph(this.data.id);\n      this.data.tvl = graph.tvl;\n      this.data.principal0 = graph.principal0;\n      this.data.principal1 = graph.principal1;\n\n      const [principalValue0, principalValue1] = await Promise.all([\n        this.oracle.valueOf(this.network.id, this.token0, this.data.principal0),\n        this.oracle.valueOf(this.network.id, this.token1, this.data.principal1),\n      ]);\n      this.data.valueIfHodl = principalValue0.add(principalValue1);\n      this.data.valueNow = this.data.value0.add(this.data.value1);\n      this.data.ilValue = this.data.valueIfHodl.sub(this.data.valueNow);\n      this.data.il = ether.sub(this.data.valueNow.mul(ether).div(this.data.valueIfHodl));\n      const pending = await this.nftPositionManager.methods.collect([this.data.id, this.args.address, maxUint128, maxUint128]).call({ from: this.args.address });\n      this.data.pending0 = await this.token0.mantissa(pending.amount0);\n      this.data.pending1 = await this.token1.mantissa(pending.amount1);\n      this.data.pendingValue0 = await this.oracle.valueOf(this.getNetwork().id, this.token0, this.data.pending0);\n      this.data.pendingValue1 = await this.oracle.valueOf(this.getNetwork().id, this.token1, this.data.pending1);\n      const collectedValue0 = await this.oracle.valueOf(this.getNetwork().id, this.token0, graph.collectedFees0);\n      const collectedValue1 = await this.oracle.valueOf(this.getNetwork().id, this.token1, graph.collectedFees1);\n\n      this.data.totalFeesValue = this.data.pendingValue0.add(this.data.pendingValue1).add(collectedValue0).add(collectedValue1);\n    }\n\n    getContractMethods = () => _.functions(this.nftPositionManager.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.nftPositionManager.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.nftPositionManager.methods as any)[method](...args);\n      alert(`target:\\n${this.nftPositionManager.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await sendWithTxType(this.nftPositionManager.methods.collect([this.data.id, this.args.address, maxUint128, maxUint128]), useLegacyTx);\n    }\n  }\n}\n\nasync function positionGraph(posId: number) {\n  const response = await fetch(\"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v3\", {\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: `{position(id:${posId}) {\n          depositedToken0\n          depositedToken1\n          withdrawnToken0\n          withdrawnToken1\n          collectedFeesToken0\n          collectedFeesToken1\n          pool {\n            totalValueLockedUSD\n            tick\n          }\n        }\n      }`,\n    }),\n    method: \"POST\",\n  });\n  const json = await response.json();\n  return {\n    tvl: bn18(json.data.position.pool.totalValueLockedUSD),\n    principal0: bn18(json.data.position.depositedToken0).sub(bn18(json.data.position.withdrawnToken0)),\n    principal1: bn18(json.data.position.depositedToken1).sub(bn18(json.data.position.withdrawnToken1)),\n    collectedFees0: bn18(json.data.position.collectedFeesToken0),\n    collectedFees1: bn18(json.data.position.collectedFeesToken1),\n    tick: json.data.position.pool.tick,\n  };\n}\n","import { PositionFactory } from \"./base/PositionFactory\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { networks } from \"./base/consts\";\nimport { bn18, erc20, Token, zero, zeroAddress } from \"@defi.org/web3-candies\";\nimport _ from \"lodash\";\n\nexport namespace OffChain {\n  export function register() {\n    PositionFactory.register({\n      \"x:OffChain:Asset\": (args, oracle) => new AssetPosition(args, oracle),\n    });\n  }\n\n  export type Asset = Token & { symbol: string };\n\n  class AssetPosition implements Position {\n    token: Asset;\n    data = {\n      amount: zero,\n      value: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {\n      if (!args.input) throw new Error(\"input amount required\");\n      if (!args.address) throw new Error(\"address symbol required\");\n      this.token = _.merge(erc20(args.address, zeroAddress), { symbol: args.address });\n      this.data.amount = bn18(args.input);\n    }\n\n    getName = () => `OffChain:${this.token.name}`;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => networks.off;\n\n    getData = () => this.data;\n\n    getAssets = () => [this.token];\n\n    getRewardAssets = () => [];\n\n    getPendingRewards = () => [];\n\n    getHealth = () => [];\n\n    async load() {\n      this.data.value = await this.oracle.valueOf(this.getNetwork().id, this.token, this.data.amount);\n    }\n\n    getAmounts = () => [{ asset: this.token, amount: this.data.amount, value: this.data.value }];\n\n    getTVL = () => zero;\n\n    getContractMethods = () => [];\n\n    async callContract(method: string, args: string[]) {}\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {}\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n","import { PositionFactory } from \"./base/PositionFactory\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { erc20s, networks } from \"./base/consts\";\nimport { bn, contract, erc20, ether, Token, zero } from \"@defi.org/web3-candies\";\nimport type { AlphaHomoraBankAbi } from \"../../typechain-abi/AlphaHomoraBankAbi\";\nimport { AlphaHomoraJoeFarmAbi } from \"../../typechain-abi/AlphaHomoraJoeFarmAbi\";\nimport _ from \"lodash\";\n\nexport namespace AlphaHomora {\n  export function register() {\n    PositionFactory.register({\n      \"avax:AlphaHomora:WETHe/AVAX\": (args, oracle) => new LYF(args, oracle, erc20s.avax.WETHe(), erc20s.avax.WAVAX()),\n    });\n  }\n\n  class LYF implements Position {\n    baseToken = erc20s.avax.WAVAX();\n    alphaHomoraBank = contract<AlphaHomoraBankAbi>(require(\"../abi/AlphaHomoraBankAbi.json\"), \"0x376d16C7dE138B01455a51dA79AD65806E9cd694\");\n    maxHistoryBlocks = {\n      [networks.avax.id]: 10_000_000,\n    };\n\n    data = {\n      id: 0,\n      supply0: zero,\n      supply1: zero,\n      borrow0: zero,\n      borrow1: zero,\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      pending: zero,\n      pendingValue: zero,\n      tvl: zero,\n      valueIfHodl: zero,\n      ilAmount: zero,\n      il: zero,\n      debtRatio: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public token0: Token, public token1: Token) {\n      this.data.id = parseInt(args.input!);\n      if (!this.data.id) throw new Error(\"invalid input positionId\");\n    }\n\n    getName = () => \"\";\n    getNetwork = () => networks.avax;\n    getArgs = () => this.args;\n    getData = () => this.data;\n    getTVL = () => this.data.tvl;\n    getAssets = () => [this.token0, this.token1];\n    getAmounts = () => [\n      { asset: this.token0, amount: this.data.amount0, value: this.data.value0 },\n      { asset: this.token1, amount: this.data.amount1, value: this.data.value1 },\n    ];\n    getRewardAssets = () => [];\n    getPendingRewards = () => [];\n    getHealth = () => [];\n\n    async load() {\n      const pos = await this.alphaHomoraBank.methods.getPositionInfo(this.data.id).call();\n      const lpSupplied = bn(pos.collateralSize);\n      const nft = contract<AlphaHomoraJoeFarmAbi>(require(\"../abi/AlphaHomoraJoeFarmAbi.json\"), pos.collToken);\n      const lpToken = erc20(\"\", await nft.methods.getUnderlyingToken(pos.collId).call());\n      const totalLPs = await lpToken.methods.totalSupply().call().then(bn);\n      const share = lpSupplied.mul(ether).div(totalLPs);\n      const total0 = await this.token0.methods.balanceOf(lpToken.address).call().then(bn);\n      const total1 = await this.token1.methods.balanceOf(lpToken.address).call().then(bn);\n      this.data.supply0 = total0.mul(share).div(ether);\n      this.data.supply1 = total1.mul(share).div(ether);\n\n      const debts = await this.alphaHomoraBank.methods.getPositionDebts(this.data.id).call();\n      this.data.borrow0 = bn(debts.debts[_.indexOf(debts.tokens, this.token0.address)]);\n      this.data.borrow1 = bn(debts.debts[_.indexOf(debts.tokens, this.token1.address)]);\n\n      this.data.amount0 = this.data.supply0.sub(this.data.borrow0);\n      this.data.amount1 = this.data.supply1.sub(this.data.borrow1);\n      this.data.value0 = await this.oracle.valueOf(this.getNetwork().id, this.token0, this.data.amount0);\n      this.data.value1 = await this.oracle.valueOf(this.getNetwork().id, this.token1, this.data.amount1);\n\n      const totalValue0 = await this.oracle.valueOf(this.getNetwork().id, this.token0, total0);\n      const totalValue1 = await this.oracle.valueOf(this.getNetwork().id, this.token1, total1);\n      this.data.tvl = totalValue0.add(totalValue1);\n    }\n\n    //     private async loadDeposits() {\n    //       const depositAbi = _(this.alphaHomoraBank.options.jsonInterface).find((x) => x.type === \"function\" && x.name === \"execute\")!;\n    //       const depositSig = web3().eth.abi.encodeFunctionSignature(depositAbi);\n    //\n    //       const currentBlock = await web3().eth.getBlockNumber();\n    //       const earliestBlock = currentBlock - this.maxHistoryBlocks[this.getNetwork().id];\n    //\n    //       const apiKey = \"\";\n    //       const alltxsResponse = await fetch(`https://api.snowtrace.io/api?module=account&action=txlist\n    // &fromBlock=${earliestBlock}\n    // &toBlock=${currentBlock}\n    // &address=${this.args.address}\n    // &sort=asc&apikey=${apiKey}`);\n    //       const alltxs = await alltxsResponse.json();\n    //       const relevantTxs = _.filter(alltxs.result, (tx) => eqIgnoreCase(tx.to, this.alphaHomoraBank.options.address) && tx.input.startsWith(depositSig));\n    //       if (relevantTxs.length !== 1) {\n    //         console.error(\"no / too many deposits\");\n    //         return;\n    //       }\n    //       const deposit = relevantTxs[0];\n    //       const receipt = await web3().eth.getTransactionReceipt(deposit.hash);\n    //       const events = parseEvents(receipt, this.token0);\n    //\n    //       const depositEvent = events.find((e) => e.event === \"Transfer\" && eqIgnoreCase(e.address, this.token0.address) && eqIgnoreCase(e.returnValues.from, this.args.address))!;\n    //       const deposit0 = bn(depositEvent.returnValues.value);\n    //       const deposit1 = _.reduce(relevantTxs, (sum, tx) => sum.add(bn(tx.value)), zero);\n    //       const valueNow0 = await this.oracle.valueOf(this.getNetwork().id, this.token0, deposit0);\n    //       const valueNow1 = await this.oracle.valueOf(this.getNetwork().id, this.token1, deposit1);\n    //\n    //       this.data.valueIfHodl = valueNow0.add(valueNow1);\n    //       const valueNow = this.data.value0.add(this.data.value1);\n    //       this.data.ilAmount = this.data.valueIfHodl.sub(valueNow);\n    //       this.data.il = ether.sub(valueNow.mul(ether).div(this.data.valueIfHodl));\n    //     }\n\n    //   private async loadDebtRatio() {\n    //     /*\n    //       struct TokenFactors {\n    //     uint16 borrowFactor; // The borrow factor for this token, multiplied by 1e4.\n    //     uint16 collateralFactor; // The collateral factor for this token, multiplied by 1e4.\n    //     uint16 liqIncentive; // The liquidation incentive, multiplied by 1e4.\n    //     mapping(address => TokenFactors) public tokenFactors; // Mapping from token address to oracle info.\n    // }\n    //        */\n    //\n    //     /*\n    //       struct TokenFactors {\n    //   uint16 borrowFactor; // The borrow factor for this token, multiplied by 1e4.\n    //   uint16 collateralFactor; // The collateral factor for this token, multiplied by 1e4.\n    //   uint16 liqIncentive; // The liquidation incentive, multiplied by 1e4.\n    // }\n    //\n    // IBaseOracle public immutable source; // Main oracle source\n    // mapping(address => TokenFactors) public tokenFactors; // Mapping from token address to oracle info.\n    // mapping(address => bool) public whitelistERC1155; // Mapping from token address to whitelist status\n    //      */\n    //     const proxyOracleAbi: Abi = [\n    //       {\n    //         name: \"tokenFactors\",\n    //         type: \"function\",\n    //         stateMutability: \"view\",\n    //         inputs: [\n    //           {\n    //             internalType: \"address\",\n    //             name: \"token\",\n    //             type: \"address\",\n    //           },\n    //         ],\n    //         outputs: [\n    //           {\n    //             internalType: \"uint256\",\n    //             name: \"borrowFactor\",\n    //             type: \"uint256\",\n    //           },\n    //           {\n    //             internalType: \"uint256\",\n    //             name: \"collateralFactor\",\n    //             type: \"uint256\",\n    //           },\n    //           {\n    //             internalType: \"uint256\",\n    //             name: \"liqIncentive\",\n    //             type: \"uint256\",\n    //           },\n    //         ],\n    //       },\n    //     ];\n    //     const o = contract(proxyOracleAbi, await this.alphaHomoraBank.methods.oracle().call());\n    //     const f0 = bn((await o.methods.tokenFactors(this.token0.address).call()).borrowFactor).toNumber() / 1e4;\n    //     const f1 = bn((await o.methods.tokenFactors(this.token1.address).call()).borrowFactor).toNumber() / 1e4;\n    //     console.log(f0, f1);\n    //   }\n\n    getContractMethods = () => [];\n    async callContract(method: string, args: string[]) {}\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {}\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n","import _ from \"lodash\";\nimport BN from \"bn.js\";\nimport { PositionFactory } from \"./base/PositionFactory\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { bn, contract, eqIgnoreCase, erc20, ether, Network, Token, zero } from \"@defi.org/web3-candies\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { erc20s, networks, sendWithTxType } from \"./base/consts\";\nimport { BalancerV2VaultAbi } from \"../../typechain-abi/BalancerV2VaultAbi\";\n\nexport namespace Balancer {\n  export function register() {\n    PositionFactory.register({\n      \"eth:Balancer:WBTC/ETH\": (args, oracle) =>\n        new Farm(args, oracle, networks.eth, [erc20s.eth.WBTC(), erc20s.eth.WETH()], \"0xa6f548df93de924d73be7d25dc02554c6bd66db500020000000000000000000e\"),\n      \"poly:Balancer:USDC/DAI/MAI/USDT\": (args, oracle) =>\n        new Farm(\n          args,\n          oracle,\n          networks.poly,\n          [erc20s.poly.USDC(), erc20s.poly.DAI(), erc20(\"MAI\", \"0xa3Fa99A148fA48D14Ed51d610c367C61876997F1\"), erc20s.poly.USDT()],\n          \"0x06df3b2bbb68adc8b0e302443692037ed9f91b42000000000000000000000012\"\n        ),\n      \"arb:Balancer:MAI/USDT/USDC\": (args, oracle) => {\n        oracle.overridePrice(networks.arb.id, erc20(\"MAI\", \"0x3F56e0c36d275367b8C502090EDF38289b3dEa0d\"), ether);\n        return new Farm(\n          args,\n          oracle,\n          networks.arb,\n          [\n            erc20(\"MAI\", \"0x3F56e0c36d275367b8C502090EDF38289b3dEa0d\"),\n            erc20(\"USDT\", \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\"),\n            erc20(\"USDC\", \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\"),\n          ],\n          \"0x0510ccf9eb3ab03c1508d3b9769e8ee2cfd6fdcf00000000000000000000005d\"\n        );\n      },\n    });\n  }\n\n  const balToken = {\n    [networks.eth.id]: () => erc20(\"BAL\", \"0xba100000625a3754423978a60c9317c58a424e3D\"),\n    [networks.poly.id]: () => erc20(\"BAL\", \"0x9a71012B13CA4d3D0Cdc72A177DF3ef03b0E76A3\"),\n    [networks.arb.id]: () => erc20(\"BAL\", \"0x040d1EdC9569d4Bab2D15287Dc5A4F10F56a56B8\"),\n  };\n\n  const balV2 = () => contract<BalancerV2VaultAbi>(require(\"../abi/BalancerV2VaultAbi.json\"), \"0xBA12222222228d8Ba445958a75a0704d566BF2C8\");\n\n  class Farm implements Position {\n    vault = balV2();\n    bal = balToken[this.network.id]();\n\n    data = {\n      amounts: [] as BN[],\n      values: [] as BN[],\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public network: Network, public tokens: Token[], public poolId: string) {}\n\n    getName = () => \"\";\n    getNetwork = () => this.network;\n    getArgs = () => this.args;\n    getData = () => this.data;\n    getTVL = () => this.data.tvl;\n    getAssets = () => this.tokens;\n    getAmounts = () => _.map(this.tokens, (asset, i) => ({ asset, amount: this.data.amounts[i] || zero, value: this.data.values[i] || zero }));\n    getRewardAssets = () => [this.bal];\n    getPendingRewards = () => [];\n    getHealth = () => [];\n\n    async load() {\n      const bpt = erc20(\n        \"BPT\",\n        await this.vault.methods\n          .getPool(this.poolId)\n          .call()\n          .then((x) => x[\"0\"])\n      );\n      const poolTokens = await this.vault.methods.getPoolTokens(this.poolId).call();\n      if (!_.every(this.tokens, (t, i) => eqIgnoreCase(t.options.address, poolTokens.tokens[i]))) throw new Error(`invalid Balancer poolBalances`);\n      const [bptBalance, bptTotalSupply] = await Promise.all([bpt.methods.balanceOf(this.args.address).call().then(bn), bpt.methods.totalSupply().call().then(bn)]);\n\n      this.data.amounts = await Promise.all(_.map(this.tokens, (t, i) => t.mantissa(bn(poolTokens.balances[i]).mul(bptBalance).div(bptTotalSupply))));\n      this.data.values = await Promise.all(_.map(this.tokens, (t, i) => this.oracle.valueOf(this.network.id, t, this.data.amounts[i])));\n\n      const poolAmounts = await Promise.all(_.map(this.tokens, (t, i) => t.mantissa(bn(poolTokens.balances[i]))));\n      const poolValues = await Promise.all(_.map(this.tokens, (t, i) => this.oracle.valueOf(this.network.id, t, poolAmounts[i])));\n      this.data.tvl = poolValues.reduce((sum, b) => sum.add(bn(b)), zero);\n    }\n\n    getContractMethods = () => _.functions(this.vault.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.vault.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.vault.methods as any)[method](...args);\n      alert(`target:\\n${this.vault.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n","import _ from \"lodash\";\nimport { bn, erc20, Token, zero, zeroAddress } from \"@defi.org/web3-candies\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { PositionFactory } from \"./base/PositionFactory\";\nimport { networks } from \"./base/consts\";\n\nexport namespace ElrondMaiar {\n  export type ESDT = Token & { esdt: true; tokenId: string; dec: number };\n\n  const tokens = {\n    EGLD: () => esdt(\"WEGLD\", \"WEGLD-bd4d79\", 18),\n    USDC: () => esdt(\"USDC\", \"USDC-c76f1f\", 6),\n    MEX: () => esdt(\"MEX\", \"MEX-455c57\", 18),\n    RIDE: () => esdt(\"RIDE\", \"RIDE-7d18e9\", 18),\n    LKMEX: () => esdt(\"LKMEX\", \"LKMEX-aab910\", 18),\n\n    MEX_EGLD: () => esdt(\"MEX/EGLD LP\", \"EGLDMEX-0be9e5\", 18),\n    USDC_EGLD: () => esdt(\"USDC/EGLD LP\", \"EGLDUSDC-594e5e\", 18),\n\n    LKFARM: () => esdt(\"LKFARM\", \"LKFARM-9d1ea8\", 18),\n  };\n\n  export type Strategy = { assets: ESDT[]; pool: string; farm: string; lp: ESDT };\n\n  export const FarmStrategies = {\n    USDC_EGLD: () => ({\n      assets: [tokens.USDC(), tokens.EGLD()],\n      pool: \"erd1qqqqqqqqqqqqqpgqeel2kumf0r8ffyhth7pqdujjat9nx0862jpsg2pqaq\",\n      farm: \"erd1qqqqqqqqqqqqqpgqutddd7dva0x4xmehyljp7wh7ecynag0u2jpskxx6xt\",\n      lp: tokens.USDC_EGLD(),\n    }),\n    L_USDC_EGLD: () => ({\n      assets: [tokens.USDC(), tokens.EGLD()],\n      pool: \"erd1qqqqqqqqqqqqqpgqeel2kumf0r8ffyhth7pqdujjat9nx0862jpsg2pqaq\",\n      farm: \"erd1qqqqqqqqqqqqqpgqwtzqckt793q8ggufxxlsv3za336674qq2jpszzgqra\",\n      lp: tokens.USDC_EGLD(),\n    }),\n    MEX_EGLD: () => ({\n      assets: [tokens.MEX(), tokens.EGLD()],\n      pool: \"erd1qqqqqqqqqqqqqpgqa0fsfshnff4n76jhcye6k7uvd7qacsq42jpsp6shh2\",\n      farm: \"erd1qqqqqqqqqqqqqpgqnqvjnn4haygsw2hls2k9zjjadnjf9w7g2jpsmc60a4\",\n      lp: tokens.MEX_EGLD(),\n    }),\n    L_MEX_EGLD: () => ({\n      assets: [tokens.MEX(), tokens.EGLD()],\n      pool: \"erd1qqqqqqqqqqqqqpgqa0fsfshnff4n76jhcye6k7uvd7qacsq42jpsp6shh2\",\n      farm: \"erd1qqqqqqqqqqqqqpgqyawg3d9r4l27zue7e9sz7djf7p9aj3sz2jpsm070jf\",\n      lp: tokens.MEX_EGLD(),\n    }),\n  };\n\n  class Farm implements Position {\n    mex = tokens.MEX();\n\n    data = {\n      lpBalanceStaked: zero,\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public strategy: Strategy) {}\n\n    getName = () => ``;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => networks.egld;\n\n    getAssets = () => this.strategy.assets;\n\n    getRewardAssets = () => [this.mex];\n\n    getData = () => this.data;\n\n    getHealth = () => [];\n\n    getAmounts = () =>\n      this.getAssets().length > 1\n        ? [\n            {\n              asset: this.getAssets()[0],\n              amount: this.data.amount0,\n              value: this.data.value0,\n            },\n            {\n              asset: this.getAssets()[1],\n              amount: this.data.amount1,\n              value: this.data.value1,\n            },\n          ]\n        : [\n            {\n              asset: this.getAssets()[0],\n              amount: this.data.amount0,\n              value: this.data.value0,\n            },\n          ];\n\n    getPendingRewards = () => [{ asset: this.mex, amount: this.data.rewardAmount, value: this.data.rewardValue }];\n\n    getTVL = () => this.data.tvl;\n\n    async load() {\n      const [asset0, asset1] = this.getAssets();\n      const [farmEsdts, pairEsdts, totalLPSupply] = await Promise.all([getESDTs(this.strategy.farm), getESDTs(this.strategy.pool), getTotalSupply(this.strategy.lp)]);\n      const totalLPStaked = bn(_.find(farmEsdts, (e) => e.tokenIdentifier === this.strategy.lp.tokenId)!.balance);\n      const asset0InPair = bn(_.find(pairEsdts, (t) => t.tokenIdentifier === asset0.tokenId)!.balance);\n      const asset1InPair = bn(_.find(pairEsdts, (t) => t.tokenIdentifier === asset1.tokenId)!.balance);\n      const asset0TotalValue = await this.oracle.valueOf(this.getNetwork().id, asset0, totalLPStaked.mul(asset0InPair).div(totalLPSupply));\n      const asset1TotalValue = await this.oracle.valueOf(this.getNetwork().id, asset1, totalLPStaked.mul(asset1InPair).div(totalLPSupply));\n      this.data.tvl = asset0TotalValue.add(asset1TotalValue);\n\n      const esdts = await getESDTs(this.args.address);\n      const lpNameSuffix = this.strategy.lp.tokenId.split(\"-\")[0];\n      const lps = _.find(esdts, (t) => t.tokenIdentifier.startsWith(lpNameSuffix));\n      if (!lps) return;\n\n      this.data.lpBalanceStaked = bn(lps!.balance);\n      this.data.amount0 = this.data.lpBalanceStaked.mul(asset0InPair).div(totalLPSupply);\n      this.data.amount1 = this.data.lpBalanceStaked.mul(asset1InPair).div(totalLPSupply);\n      this.data.value0 = await this.oracle.valueOf(this.getNetwork().id, asset0, this.data.amount0);\n      this.data.value1 = await this.oracle.valueOf(this.getNetwork().id, asset1, this.data.amount1);\n    }\n\n    getContractMethods = () => [];\n\n    async callContract(method: string, args: string[]) {}\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {}\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n\n  export const MexFarmStrategies = {\n    MEX: () => ({\n      assets: [tokens.MEX()],\n      pool: \"erd1qqqqqqqqqqqqqpgqrc4pg2xarca9z34njcxeur622qmfjp8w2jps89fxnl\",\n      farm: \"erd1qqqqqqqqqqqqqpgqe9v45fnpkv053fj0tk7wvnkred9pms892jps9lkqrn\",\n      lp: tokens.MEX(),\n    }),\n    L_MEX: () => ({\n      assets: [tokens.MEX()],\n      pool: \"erd1qqqqqqqqqqqqqpgqrc4pg2xarca9z34njcxeur622qmfjp8w2jps89fxnl\",\n      farm: \"erd1qqqqqqqqqqqqqpgq7qhsw8kffad85jtt79t9ym0a4ycvan9a2jps0zkpen\",\n      lp: tokens.LKMEX(),\n    }),\n  };\n\n  class MexFarm extends Farm {\n    getRewardAssets = () => [(this.strategy as Strategy).lp];\n\n    getPendingRewards = () => [{ asset: this.mex, amount: this.data.rewardAmount, value: this.data.rewardValue }];\n\n    override async load() {\n      const asset = this.getAssets()[0];\n\n      const farmEsdts = await getESDTs(this.strategy.farm);\n      const totalAssetStaked = bn(_.find(farmEsdts, (e) => e.tokenIdentifier === asset.tokenId)!.balance);\n      this.data.tvl = await this.oracle.valueOf(networks.egld.id, asset, totalAssetStaked);\n\n      const esdts = await getESDTs(this.args.address);\n      const farmNftWrapper = _.find(esdts, (e) => e.creator === this.strategy.pool.toString() && e.tokenIdentifier.startsWith(tokens.LKFARM().tokenId));\n      if (!farmNftWrapper) return;\n\n      this.data.amount0 = bn(farmNftWrapper.balance.toString());\n      this.data.value0 = await this.oracle.valueOf(networks.egld.id, asset, this.data.amount0);\n    }\n  }\n\n  function esdt(name: string, tokenId: string, decimals: number): ESDT {\n    const result = erc20(name, zeroAddress) as ESDT;\n    result.esdt = true;\n    result.tokenId = tokenId;\n    result.dec = decimals;\n    return result;\n  }\n\n  async function getESDTs(address: string) {\n    const response = await fetch(`https://gateway.elrond.com/address/${address}/esdt`);\n    const json = await response.json();\n    return _.get(json, [\"data\", \"esdts\"], []);\n  }\n\n  async function getTotalSupply(token: ESDT) {\n    const response = await fetch(`https://gateway.elrond.com/network/esdt/supply/${token.tokenId}`);\n    const json = await response.json();\n    return bn(_.get(json, [\"data\", \"supply\"], \"0\"));\n  }\n\n  export function register() {\n    PositionFactory.register({\n      \"egld:Maiar:Farm:USDC/EGLD\": (args, oracle) => new Farm(args, oracle, ElrondMaiar.FarmStrategies.USDC_EGLD()),\n      \"egld:Maiar:LFarm:USDC/EGLD\": (args, oracle) => new Farm(args, oracle, ElrondMaiar.FarmStrategies.L_USDC_EGLD()),\n      \"egld:Maiar:Farm:MEX/EGLD\": (args, oracle) => new Farm(args, oracle, ElrondMaiar.FarmStrategies.MEX_EGLD()),\n      \"egld:Maiar:LFarm:MEX/EGLD\": (args, oracle) => new Farm(args, oracle, ElrondMaiar.FarmStrategies.L_MEX_EGLD()),\n      \"egld:Maiar:MEXFarm:MEX\": (args, oracle) => new MexFarm(args, oracle, ElrondMaiar.MexFarmStrategies.MEX()),\n      \"egld:Maiar:MEXLFarm:MEX\": (args, oracle) => new MexFarm(args, oracle, ElrondMaiar.MexFarmStrategies.L_MEX()),\n    });\n  }\n\n  // export async function balances(oracle: PriceOracle, address: string): Promise<TokenAmount[]> {\n  //   const assets = _.map(tokens, (t) => t());\n\n  // https://gateway.elrond.com/address/:bech32Address/balance\n\n  // const [esdts, balanceEGLD] = await Promise.all([getESDTs(address), provider.getAccount(new Address(address)).then((r) => bn(r.balance.toString()))]);\n\n  // const balances = await Promise.all(\n  //   _(esdts)\n  //     .map((e) => ({ asset: _.find(assets, (asset) => e.tokenIdentifier === asset.tokenId), esdt: e }))\n  //     .filter((t) => !!t.asset)\n  //     .map(async (t) => {\n  //       const amount = to18(t.esdt.balance, t.asset!.dec);\n  //       return {\n  //         asset: t.asset!,\n  //         amount,\n  //         value: await oracle.valueOf(networks.egld.id, t.asset!, amount),\n  //       };\n  //     })\n  //     .value()\n  // );\n\n  // balances.push({ asset: esdt(\"EGLD\", \"\", 18), amount: balanceEGLD, value: await oracle.valueOf(networks.egld.id, tokens.EGLD(), balanceEGLD) });\n\n  // return balances;\n  // }\n}\n\n// const ZERO_ADDRESS = \"erd1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq6gq4hu\";\n// const ESDT_ISSUE_ADDRESS = \"erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u\";\n// const LOCKED_ASSET_FACTORY_ADDRESS = \"erd1qqqqqqqqqqqqqpgqjpt0qqgsrdhp2xqygpjtfrpwf76f9nvg2jpsg4q7th\";\n// const ROUTE_ADDRESS = \"erd1qqqqqqqqqqqqqpgqq66xk9gfr4esuhem3jru86wg5hvp33a62jps2fy57p\";\n// const MEXEGLD_POOL_ADDRESS = \"erd1qqqqqqqqqqqqqpgqa0fsfshnff4n76jhcye6k7uvd7qacsq42jpsp6shh2\";\n// const USDCEGLD_POOL_ADDRESS = \"erd1qqqqqqqqqqqqqpgqeel2kumf0r8ffyhth7pqdujjat9nx0862jpsg2pqaq\";\n// const MEXEGLD_FARM_ADDRESS = \"erd1qqqqqqqqqqqqqpgqye633y7k0zd7nedfnp3m48h24qygm5jl2jpslxallh\";\n// const USDCEGLD_FARM_ADDRESS = \"erd1qqqqqqqqqqqqqpgqsw9pssy8rchjeyfh8jfafvl3ynum0p9k2jps6lwewp\";\n// const MEX_FARM_ADDRESS = \"erd1qqqqqqqqqqqqqpgqv4ks4nzn2cw96mm06lt7s2l3xfrsznmp2jpsszdry5\";\n// const PROXY_ADDRESS = \"erd1qqqqqqqqqqqqqpgqrc4pg2xarca9z34njcxeur622qmfjp8w2jps89fxnl\";\n// const RIDE_EGLD_POOL = \"erd1qqqqqqqqqqqqqpgqav09xenkuqsdyeyy5evqyhuusvu4gl3t2jpss57g8x\";\n// const MEX_TOKEN = \"MEX-455c57\";\n// const LKMEX_TOKEN = \"LKMEX-aab910\";\n// const WEGLD_TOKEN = \"WEGLD-bd4d79\";\n// const USDC_TOKEN = \"USDC-c76f1f\";\n// const EGLDMEXLP = \"EGLDMEX-0be9e5\";\n// const EGLDUSDCLP = \"EGLDUSDC-594e5e\";\n// const EGLDMEXF = \"EGLDMEXF-5bcc57\";\n// const EGLDUSDCF = \"EGLDUSDCF-8600f8\";\n// const MEXFARM = \"MEXFARM-e7af52\";\n// const LOCKED_LP = \"LKLP-03a2fa\";\n// const LOCKED_FARM = \"LKFARM-9d1ea8\";\n// const WEGLD_SHARD0 = \"erd1qqqqqqqqqqqqqpgqvc7gdl0p4s97guh498wgz75k8sav6sjfjlwqh679jy\";\n// const WEGLD_SHARD1 = \"erd1qqqqqqqqqqqqqpgqhe8t5jewej70zupmh44jurgn29psua5l2jps3ntjj3\";\n// const WEGLD_SHARD2 = \"erd1qqqqqqqqqqqqqpgqmuk0q2saj0mgutxm4teywre6dl8wqf58xamqdrukln\";\n\n// farms v2:\n// EGLD/MEX => MEX : erd1qqqqqqqqqqqqqpgqnqvjnn4haygsw2hls2k9zjjadnjf9w7g2jpsmc60a4\n// EGLD/MEX => LKMEX: erd1qqqqqqqqqqqqqpgqyawg3d9r4l27zue7e9sz7djf7p9aj3sz2jpsm070jf\n// EGLD/USDC => MEX: erd1qqqqqqqqqqqqqpgqutddd7dva0x4xmehyljp7wh7ecynag0u2jpskxx6xt\n// EGLD/USDC => LKMEX: erd1qqqqqqqqqqqqqpgqwtzqckt793q8ggufxxlsv3za336674qq2jpszzgqra\n// MEX => MEX: erd1qqqqqqqqqqqqqpgqe9v45fnpkv053fj0tk7wvnkred9pms892jps9lkqrn\n// MEX => LKMEX: erd1qqqqqqqqqqqqqpgq7qhsw8kffad85jtt79t9ym0a4ycvan9a2jps0zkpen\n","import _ from \"lodash\";\nimport type { TraderJoeFarmAbi } from \"../../typechain-abi/TraderJoeFarmAbi\";\nimport { bn, contract, erc20, erc20s, Token, zero } from \"@defi.org/web3-candies\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { networks, sendWithTxType } from \"./base/consts\";\nimport { PositionFactory } from \"./base/PositionFactory\";\n\nexport namespace TraderJoe {\n  export function register() {\n    PositionFactory.register({\n      \"avax:TraderJoe:Farm:WETH/AVAX\": (args, oracle) => new Farm(args, oracle, erc20s.avax.WETHe(), erc20s.avax.WAVAX(), 26),\n    });\n  }\n\n  class Farm implements Position {\n    masterchef = contract<TraderJoeFarmAbi>(require(\"../abi/TraderJoeFarmAbi.json\"), \"0xd6a4F121CA35509aF06A0Be99093d08462f53052\");\n    reward = erc20(\"JOE\", \"0x6e84a6216eA6dACC71eE8E6b0a5B7322EEbC0fDd\");\n\n    data = {\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public asset0: Token, public asset1: Token, public poolId: number) {}\n\n    getName = () => ``;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => networks.avax;\n\n    getAssets = () => [this.asset0, this.asset1];\n\n    getRewardAssets = () => [this.reward];\n\n    getData = () => this.data;\n\n    getHealth = () => [];\n\n    getAmounts = () => [\n      {\n        asset: this.asset0,\n        amount: this.data.amount0,\n        value: this.data.value0,\n      },\n      {\n        asset: this.asset1,\n        amount: this.data.amount1,\n        value: this.data.value1,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.reward,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getTVL = () => this.data.tvl;\n\n    async load() {\n      const [poolInfo, userInfo, pending] = await Promise.all([\n        this.masterchef.methods.poolInfo(this.poolId).call(),\n        this.masterchef.methods.userInfo(this.poolId, this.args.address).call(),\n        this.masterchef.methods.pendingTokens(this.poolId, this.args.address).call(),\n      ]);\n      const lpToken = erc20(\"LP\", poolInfo.lpToken);\n      const lpTotalSupply = await lpToken.methods.totalSupply().call().then(bn);\n      const lpAmount = bn(userInfo.amount);\n      const [total0, total1, lpStaked] = await Promise.all([\n        this.asset0.methods\n          .balanceOf(lpToken.options.address)\n          .call()\n          .then((x) => this.asset0.mantissa(x)),\n        this.asset1.methods\n          .balanceOf(lpToken.options.address)\n          .call()\n          .then((x) => this.asset1.mantissa(x)),\n        lpToken.methods.balanceOf(this.masterchef.options.address).call().then(bn),\n      ]);\n      this.data.amount0 = total0.mul(lpAmount).div(lpTotalSupply);\n      this.data.amount1 = total1.mul(lpAmount).div(lpTotalSupply);\n      this.data.value0 = await this.oracle.valueOf(this.getNetwork().id, this.asset0, this.data.amount0);\n      this.data.value1 = await this.oracle.valueOf(this.getNetwork().id, this.asset1, this.data.amount1);\n      this.data.tvl = (await this.oracle.valueOf(this.getNetwork().id, this.asset0, total0.mul(lpStaked).div(lpTotalSupply))).add(\n        await this.oracle.valueOf(this.getNetwork().id, this.asset1, total1.mul(lpStaked).div(lpTotalSupply))\n      );\n\n      this.data.rewardAmount = await this.reward.mantissa(pending.pendingJoe);\n      this.data.rewardValue = await this.oracle.valueOf(this.getNetwork().id, this.reward, this.data.rewardAmount);\n    }\n\n    getContractMethods = () => _.functions(this.masterchef.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      alert(`target:\\n${this.masterchef.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await sendWithTxType(this.masterchef.methods.deposit(this.poolId, 0), useLegacyTx);\n    }\n  }\n}\n","import _ from \"lodash\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, bn9, contract, Network, Token, zero } from \"@defi.org/web3-candies\";\nimport { PositionFactory } from \"./base/PositionFactory\";\nimport { erc20s, networks, sendWithTxType } from \"./base/consts\";\nimport type { RibbonThetaVaultAbi } from \"../../typechain-abi/RibbonThetaVaultAbi\";\nimport type { RibbonGaugeAbi } from \"../../typechain-abi/RibbonGaugeAbi\";\n\nexport namespace Ribbon {\n  export function register() {\n    PositionFactory.register({\n      \"eth:Ribbon:T-CC:ETH\": (args, oracle) => new ThetaVault(args, oracle, networks.eth, erc20s.eth.WETH(), \"0x25751853Eab4D0eB3652B5eB6ecB102A2789644B\"),\n      \"eth:Ribbon:T-CC:stETH\": (args, oracle) => new ThetaVault(args, oracle, networks.eth, erc20s.eth.WETH(), \"0x53773E034d9784153471813dacAFF53dBBB78E8c\"),\n      \"eth:Ribbon:T-CC:WBTC\": (args, oracle) => new ThetaVault(args, oracle, networks.eth, erc20s.eth.WBTC(), \"0x65a833afDc250D9d38f8CD9bC2B1E3132dB13B2F\"),\n      \"eth:Ribbon:T-CSP:yvUSDC\": (args, oracle) => new ThetaVault(args, oracle, networks.eth, erc20s.eth.USDC(), \"0xCc323557c71C0D1D20a1861Dc69c06C5f3cC9624\"),\n    });\n  }\n\n  class ThetaVault implements Position {\n    vault = contract<RibbonThetaVaultAbi>(require(\"../abi/RibbonThetaVaultAbi.json\"), this.vaultAddress);\n\n    data = {\n      amount: zero,\n      value: zero,\n      tvl: zero,\n      strike: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public network: Network, public asset: Token, public vaultAddress: string) {}\n\n    getName = () => \"\";\n    getNetwork = () => this.network;\n    getArgs = () => this.args;\n    getData = () => this.data;\n    getTVL = () => this.data.tvl;\n    getAssets = () => [this.asset];\n    getAmounts = () => [{ asset: this.asset, amount: this.data.amount, value: this.data.value }];\n    getRewardAssets = () => [];\n    getPendingRewards = () => [];\n    getHealth = () => [];\n\n    async load() {\n      const { amount, unredeemedShares } = await this.vault.methods.depositReceipts(this.args.address).call();\n      this.data.amount = await this.asset.mantissa(bn(amount).add(bn(unredeemedShares)));\n\n      const farm = contract<RibbonGaugeAbi>(require(\"../abi/RibbonGaugeAbi.json\"), await this.vault.methods.liquidityGauge().call());\n      const [fbalance, fratio] = await Promise.all([farm.methods.balanceOf(this.args.address).call().then(bn), this.vault.methods.pricePerShare().call().then(bn)]);\n      const staked = await this.asset.mantissa(fbalance.mul(fratio).div(await this.asset.amount(1)));\n      this.data.amount = this.data.amount.add(staked);\n\n      this.data.value = await this.oracle.valueOf(this.network.id, this.asset, this.data.amount);\n\n      const total = await this.asset.mantissa(await this.vault.methods.totalBalance().call());\n      this.data.tvl = await this.oracle.valueOf(this.network.id, this.asset, total);\n\n      const currentOption = contract(require(\"../abi/RibbonOptionAbi.json\"), await this.vault.methods.currentOption().call());\n      this.data.strike = bn9(await currentOption.methods[\"strikePrice()\"]().call()).muln(10);\n    }\n\n    getContractMethods = () => _.functions(this.vault.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.vault.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.vault.methods as any)[method](...args);\n      alert(`target:\\n${this.vault.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n","import _ from \"lodash\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, contract, erc20, ether, zero } from \"@defi.org/web3-candies\";\nimport { erc20s, networks, sendWithTxType } from \"./base/consts\";\nimport type { LooksrareStakingAbi } from \"../../typechain-abi/LooksrareStakingAbi\";\nimport { PositionFactory } from \"./base/PositionFactory\";\n\nexport namespace LooksRare {\n  export function register() {\n    PositionFactory.register({\n      \"eth:LooksRare:LooksStaking\": (args, oracle) => new Staking(args, oracle),\n    });\n  }\n\n  class Staking implements Position {\n    eth = erc20s.eth.WETH();\n    looks = erc20(\"LOOKS\", \"0xf4d2888d29D722226FafA5d9B24F9164c092421E\");\n    vault = contract<LooksrareStakingAbi>(require(\"../abi/LooksrareStakingAbi.json\"), \"0xBcD7254A1D759EFA08eC7c3291B2E85c5dCC12ce\");\n\n    data = {\n      amount: zero,\n      value: zero,\n      pendingAmount: zero,\n      pendingValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {}\n\n    getName = () => \"\";\n    getNetwork = () => networks.eth;\n    getArgs = () => this.args;\n    getData = () => this.data;\n    getTVL = () => this.data.tvl;\n    getAssets = () => [this.looks];\n    getAmounts = () => [{ asset: this.looks, amount: this.data.amount, value: this.data.value }];\n    getRewardAssets = () => [this.eth];\n    getPendingRewards = () => [{ asset: this.eth, amount: this.data.pendingAmount, value: this.data.pendingValue }];\n    getHealth = () => [];\n\n    async load() {\n      const [stakedLooks, pendingEth] = await Promise.all([\n        this.vault.methods.calculateSharesValueInLOOKS(this.args.address).call().then(bn),\n        this.vault.methods.calculatePendingRewards(this.args.address).call().then(bn),\n      ]);\n      this.data.amount = stakedLooks;\n      this.data.pendingAmount = pendingEth;\n      const tvlAmount = bn(await this.vault.methods.totalShares().call())\n        .mul(bn(await this.vault.methods.calculateSharePriceInLOOKS().call()))\n        .div(ether);\n\n      [this.data.value, this.data.pendingValue, this.data.tvl] = await Promise.all([\n        this.oracle.valueOf(this.getNetwork().id, this.looks, this.data.amount),\n        this.oracle.valueOf(this.getNetwork().id, this.eth, this.data.pendingAmount),\n        this.oracle.valueOf(this.getNetwork().id, this.looks, tvlAmount),\n      ]);\n    }\n\n    getContractMethods = () => _.functions(this.vault.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.vault.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.vault.methods as any)[method](...args);\n      alert(`target:\\n${this.vault.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n","import _ from \"lodash\";\nimport { bn, erc20, erc20s, Token, zero } from \"@defi.org/web3-candies\";\nimport { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { contracts, networks, sendWithTxType } from \"./base/consts\";\nimport { PositionFactory } from \"./base/PositionFactory\";\n\nexport namespace SushiSwap {\n  export function register() {\n    PositionFactory.register({\n      \"eth:SushiSwap:Farm:USDC/ETH\": (args, oracle) => new Farm(args, oracle, erc20s.eth.USDC(), erc20s.eth.WETH(), 1),\n    });\n  }\n\n  class Farm implements Position {\n    masterchef = contracts.eth.Sushiswap_Masterchef();\n    reward = erc20(\"SUSHI\", \"0x6B3595068778DD592e39A122f4f5a5cF09C90fE2\");\n\n    data = {\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      tvl: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public asset0: Token, public asset1: Token, public poolId: number) {}\n\n    getName = () => ``;\n\n    getArgs = () => this.args;\n\n    getNetwork = () => networks.eth;\n\n    getAssets = () => [this.asset0, this.asset1];\n\n    getRewardAssets = () => [this.reward];\n\n    getData = () => this.data;\n\n    getHealth = () => [];\n\n    getAmounts = () => [\n      {\n        asset: this.asset0,\n        amount: this.data.amount0,\n        value: this.data.value0,\n      },\n      {\n        asset: this.asset1,\n        amount: this.data.amount1,\n        value: this.data.value1,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.reward,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getTVL = () => this.data.tvl;\n\n    async load() {\n      const [poolInfo, userInfo, pending] = await Promise.all([\n        this.masterchef.methods.poolInfo(this.poolId).call(),\n        this.masterchef.methods.userInfo(this.poolId, this.args.address).call(),\n        this.masterchef.methods.pendingSushi(this.poolId, this.args.address).call(),\n      ]);\n      const lpToken = erc20(\"LP\", poolInfo.lpToken);\n      const lpTotalSupply = await lpToken.methods.totalSupply().call().then(bn);\n      const lpAmount = bn(userInfo.amount);\n      const [total0, total1, lpStaked] = await Promise.all([\n        this.asset0.methods\n          .balanceOf(lpToken.options.address)\n          .call()\n          .then((x) => this.asset0.mantissa(x)),\n        this.asset1.methods\n          .balanceOf(lpToken.options.address)\n          .call()\n          .then((x) => this.asset1.mantissa(x)),\n        lpToken.methods.balanceOf(this.masterchef.options.address).call().then(bn),\n      ]);\n      this.data.amount0 = total0.mul(lpAmount).div(lpTotalSupply);\n      this.data.amount1 = total1.mul(lpAmount).div(lpTotalSupply);\n      this.data.value0 = await this.oracle.valueOf(this.getNetwork().id, this.asset0, this.data.amount0);\n      this.data.value1 = await this.oracle.valueOf(this.getNetwork().id, this.asset1, this.data.amount1);\n      this.data.tvl = (await this.oracle.valueOf(this.getNetwork().id, this.asset0, total0.mul(lpStaked).div(lpTotalSupply))).add(\n        await this.oracle.valueOf(this.getNetwork().id, this.asset1, total1.mul(lpStaked).div(lpTotalSupply))\n      );\n\n      this.data.rewardAmount = await this.reward.mantissa(pending);\n      this.data.rewardValue = await this.oracle.valueOf(this.getNetwork().id, this.reward, this.data.rewardAmount);\n    }\n\n    getContractMethods = () => _.functions(this.masterchef.methods);\n\n    async callContract(method: string, args: string[]) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      return await tx.call({ from: this.args.address });\n    }\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      alert(`target:\\n${this.masterchef.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await sendWithTxType(tx, useLegacyTx);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await sendWithTxType(this.masterchef.methods.deposit(this.poolId, 0), useLegacyTx);\n    }\n  }\n}\n","import { PositionFactory } from \"./base/PositionFactory\";\nimport { Pancakeswap } from \"./Pancakeswap\";\nimport { Loops } from \"./Loops\";\nimport { Revault } from \"./Revault\";\nimport { Unicly } from \"./Unicly\";\nimport { Fodl } from \"./Fodl\";\nimport { TokenBalances } from \"./TokenBalances\";\nimport { Uniswap } from \"./Uniswap\";\nimport { OffChain } from \"./OffChain\";\nimport { AlphaHomora } from \"./AlphaHomora\";\nimport { Balancer } from \"./Balancer\";\nimport { ElrondMaiar } from \"./ElrondMaiar\";\nimport { TraderJoe } from \"./TraderJoe\";\nimport { Ribbon } from \"./Ribbon\";\nimport { LooksRare } from \"./LooksRare\";\nimport { SushiSwap } from \"./SushiSwap\";\n\nexport function registerAllPositions() {\n  OffChain.register();\n  TokenBalances.register();\n\n  Uniswap.register();\n  SushiSwap.register();\n  Pancakeswap.register();\n  Revault.register();\n  AlphaHomora.register();\n  Balancer.register();\n  ElrondMaiar.register();\n  TraderJoe.register();\n  Ribbon.register();\n  LooksRare.register();\n\n  PositionFactory.register({\n    \"eth:Fodl:XFodlStake\": (args, oracle) => new Fodl.XFodlStake(args, oracle),\n\n    \"eth:Unicly:XUnicFarm:uPunks\": (args, oracle) => new Unicly.XUnicFarm(args, oracle, Unicly.Strategies.uPunks()),\n    \"eth:Unicly:XUnicFarm:uJenny\": (args, oracle) => new Unicly.XUnicFarm(args, oracle, Unicly.Strategies.uJenny()),\n\n    \"eth:Loops:AaveLoop\": (args, oracle) => new Loops.AaveLoop(args, oracle),\n    \"eth:Loops:CompoundLoop\": (args, oracle) => new Loops.CompoundLoop(args, oracle),\n  });\n}\n","import _ from \"lodash\";\nimport { createHook, createSelector, createStore, StoreActionApi } from \"react-sweet-state\";\nimport { Position, PositionArgs } from \"../positions/base/Position\";\nimport { PositionFactory } from \"../positions/base/PositionFactory\";\nimport { registerAllPositions } from \"../positions\";\nimport { to3, Token, zero } from \"@defi.org/web3-candies\";\nimport { currentNetwork } from \"../positions/base/consts\";\nimport BN from \"bn.js\";\n\nregisterAllPositions();\n\nconst STORAGE_KEY = \"PositionArgs:v1\";\nexport const loadPositionsFromStorage = () => JSON.parse(localStorage.getItem(STORAGE_KEY) || \"{}\") as Record<string, PositionArgs>;\nexport const savePositionsToStorage = (data: Record<string, PositionArgs>) => localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n\nconst AllPositionsState = createStore({\n  name: \"AllPositionsState\",\n\n  initialState: {\n    positions: {} as Record<string, Position>,\n  },\n\n  actions: {\n    load: () => async (api) => {\n      await load(api);\n    },\n\n    addPosition: (type: string, address: string, input: string, name: string) => async (api) => {\n      const position = PositionFactory.create({ type, address, input, name, id: \"\" });\n      if (!position) {\n        alert(`unknown type ${type} at ${address}`);\n        return;\n      }\n\n      const data = _.mapValues(api.getState().positions, (p) => p.getArgs());\n      data[position.getArgs().id] = position.getArgs();\n      savePositionsToStorage(data);\n      await load(api);\n    },\n\n    update: (position: Position, newArgs: PositionArgs) => async (api) => {\n      const data = _.mapValues(api.getState().positions, (p) => p.getArgs());\n      data[position.getArgs().id] = newArgs;\n      savePositionsToStorage(data);\n      await load(api);\n    },\n\n    delete: (posId: string) => async (api) => {\n      const data = _.mapValues(api.getState().positions, (p) => p.getArgs());\n      delete data[posId];\n      savePositionsToStorage(data);\n      await load(api);\n    },\n\n    sendTransaction:\n      (posId: string, useLegacyTx: boolean, method: string, args: string[]) =>\n      async ({ getState }) => {\n        await getState().positions[posId].sendTransaction(method, args, useLegacyTx);\n      },\n\n    harvest:\n      (posId: string, useLegacyTx: boolean) =>\n      async ({ getState }) => {\n        await getState().positions[posId].harvest(useLegacyTx);\n      },\n  },\n});\n\nasync function load(api: StoreActionApi<typeof AllPositionsState.initialState>) {\n  console.log(\"LOAD positions...\");\n  const current = api.getState().positions;\n  const positions = _.mapValues(loadPositionsFromStorage(), (args) => current[args.id] || PositionFactory.create(args));\n\n  for (const id in positions) if (!positions[id]) delete positions[id];\n\n  await PositionFactory.oracle.warmup(_.values(positions));\n\n  const network = await currentNetwork();\n\n  await Promise.all(\n    _.map(positions, (p) => {\n      if (!p || !network || !PositionFactory.shouldLoad(p, network)) return;\n      return p\n        .load()\n        .then(() => ((p as any).loaded = true))\n        .catch((e) => {\n          (p as any).loaded = false;\n          console.log(p.getArgs().type, e);\n        });\n    })\n  );\n  api.setState({ positions });\n  console.log(`...done loading ${network?.name}`);\n}\n\nexport const useAllPositionsActions = createHook(AllPositionsState, { selector: null });\n\nexport const useAllPositionRows = createHook(AllPositionsState, {\n  selector: createSelector(\n    (state) =>\n      _(state.positions)\n        .values()\n        .sortBy((p) => p.getArgs().type)\n        .value(),\n    (positions) =>\n      _.map(positions, (p) => ({\n        id: p.getArgs().id,\n        type: p.getArgs().type,\n        name: p.getArgs().name || p.getName() || p.getArgs().type,\n        chain: p.getNetwork().name,\n        health: p.getHealth(),\n        marketValue: num(marketValue(p)),\n        pending: num(p.getPendingRewards().reduce((sum, v) => sum.add(v.value), zero)),\n        tvl: num(p.getTVL()),\n        position: p,\n        address: p.getArgs().address,\n        loaded: !!(p as any).loaded,\n      }))\n  ),\n});\nexport const useAllPositions = createHook(AllPositionsState, {\n  selector: (state) => state.positions,\n});\n\nexport const useAllPositionsValuePerPosition = createHook(AllPositionsState, {\n  selector: createSelector(\n    (state) => _.map(state.positions, (position) => ({ position, marketValue: Math.round(num(marketValue(position))) })),\n    (rows) => {\n      const sorted = _.sortBy(rows, (r) => -r.marketValue);\n      return {\n        labels: sorted.map((p) => p.position.getArgs().name || p.position.getName() || p.position.getArgs().type),\n        values: sorted.map((p) => p.marketValue),\n      };\n    }\n  ),\n});\n\nexport const useAllPositionsValuePerAssetClass = createHook(AllPositionsState, {\n  selector: createSelector(\n    (state) =>\n      _(state.positions)\n        .map((position) => position.getAmounts())\n        .flatten()\n        .value(),\n    (amounts) => {\n      const reduced = _(amounts)\n        .groupBy((a) => assetClass(a.asset))\n        .map((values, key) => ({ assetClass: key, value: _.reduce(values, (sum, a) => sum + num(a.value), 0) }))\n        .sortBy((v) => -v.value)\n        .value();\n      return {\n        labels: _.map(reduced, (ac) => ac.assetClass),\n        values: _.map(reduced, (ac) => Math.round(ac.value)),\n      };\n    }\n  ),\n});\n\nexport const useAllPositionsValuePerChain = createHook(AllPositionsState, {\n  selector: createSelector(\n    (state) => _.groupBy(state.positions, (p) => p.getNetwork().name),\n    (grouped) => {\n      const totalPerChain = _(grouped)\n        .map((positions, chain) => ({\n          chain,\n          marketValue: Math.round(num(totalMarketValue(positions))),\n        }))\n        .sortBy((t) => -t.marketValue)\n        .value();\n      return {\n        labels: _.map(totalPerChain, (t) => t.chain),\n        values: _.map(totalPerChain, (t) => t.marketValue),\n        grandtotal: _.reduce(totalPerChain, (sum, t) => sum + t.marketValue, 0),\n      };\n    }\n  ),\n});\n\nfunction num(bn: BN) {\n  return to3(bn, 18).toNumber() / 1000;\n}\n\nfunction marketValue(p: Position) {\n  return _.reduce(p.getAmounts(), (sum, v) => sum.add(v.value), zero);\n}\n\nfunction totalMarketValue(positions: Position[]) {\n  return _.reduce(positions, (sum, pos) => sum.add(marketValue(pos)), zero);\n}\n\nfunction assetClass(a: Token): string {\n  const ext = (a as any).symbol || (a as any).tokenId;\n  if (ext) return ext;\n  if (a.name.toLowerCase().includes(\"usd\") || [\"dai\", \"mai\", \"mim\"].includes(a.name.toLowerCase())) return \"USD\";\n  if (a.name.toLowerCase().includes(\"btc\")) return \"BTC\";\n  if (a.name.toLowerCase().includes(\"eth\")) return \"ETH\";\n  if (a.name.toLowerCase().includes(\"bnb\")) return \"BNB\";\n  if (a.name.toLowerCase().includes(\"avax\")) return \"AVAX\";\n  if (a.name.toLowerCase().includes(\"matic\")) return \"MATIC\";\n  if (a.name.toLowerCase().includes(\"ftm\")) return \"FTM\";\n  return a.name || a.address;\n}\n","import { createHook, createSelector, createStore } from \"react-sweet-state\";\nimport { Position } from \"../positions/base/Position\";\nimport _ from \"lodash\";\nimport BN from \"bn.js\";\nimport { fmt18 } from \"@defi.org/web3-candies\";\n\nconst PositionDialogState = createStore({\n  name: \"PositionDialogState\",\n\n  initialState: {\n    position: null as Position | null,\n    useLegacy: false,\n    selectedMethod: \"\",\n    selectedMethodArgs: {},\n  },\n\n  actions: {\n    showPosition:\n      (position: Position) =>\n      async ({ setState, getState }) => {\n        if (getState().position !== position) {\n          setState({ position, selectedMethod: \"\", selectedMethodArgs: {}, useLegacy: false });\n        }\n      },\n\n    closeDialog:\n      () =>\n      async ({ setState }) => {\n        setState({ position: null });\n      },\n\n    selectMethod:\n      (method: string) =>\n      async ({ setState }) => {\n        setState({ selectedMethod: method, selectedMethodArgs: {} });\n      },\n\n    setMethodArg:\n      (index: number, arg: string) =>\n      async ({ setState, getState }) => {\n        setState({ selectedMethodArgs: { ...getState().selectedMethodArgs, [index]: arg } });\n      },\n\n    setUseLegacy:\n      (useLegacy: boolean) =>\n      async ({ setState }) => {\n        setState({ useLegacy });\n      },\n\n    harvest:\n      () =>\n      async ({ getState }) => {\n        await getState().position!.harvest(getState().useLegacy);\n      },\n\n    send:\n      () =>\n      async ({ getState }) => {\n        await getState().position!.sendTransaction(getState().selectedMethod, _.values(getState().selectedMethodArgs), getState().useLegacy);\n      },\n\n    call:\n      (showAlert: (a: string) => void) =>\n      async ({ getState }) => {\n        showAlert(await getState().position!.callContract(getState().selectedMethod, _.values(getState().selectedMethodArgs)));\n      },\n  },\n});\n\nexport const usePositionDialogActions = createHook(PositionDialogState, { selector: null });\nexport const usePositionDialogSelector = createHook(PositionDialogState, {\n  selector: createSelector(\n    (state) => state,\n    (state) => state.position?.getContractMethods().filter((m) => !m.startsWith(\"0x\") && m.endsWith(\")\")) || [],\n    (state) =>\n      state.selectedMethod\n        .substring(state.selectedMethod.indexOf(\"(\") + 1, state.selectedMethod.length - 1)\n        .split(\",\")\n        .filter((a) => a.length > 0),\n    (state) =>\n      _(state.position?.getAssets())\n        .mapKeys((a) => a.name)\n        .mapValues((v) => v.address)\n        .value(),\n    (state) =>\n      _(state.position?.getRewardAssets())\n        .mapKeys((a) => a.name)\n        .mapValues((v) => v.address)\n        .value(),\n    (state) => _.mapValues(state.position?.getData(), fmtData),\n    (state, positionMethods, selectedMethodArgTypes, assets, rewardAssets, data) => ({\n      position: state.position,\n      positionMethods,\n      selectedMethod: state.selectedMethod,\n      selectedMethodArgTypes,\n      useLegacy: state.useLegacy,\n      rawData: JSON.stringify({ assets, rewardAssets, data }, null, 4),\n    })\n  ),\n});\n\nfunction fmtData(data: any): any {\n  if (_.isArray(data)) return _.map(data, fmtData);\n  return data instanceof BN ? fmt18(data) : data;\n}\n","import { createHook, createStore } from \"react-sweet-state\";\nimport { PositionFactory } from \"../positions/base/PositionFactory\";\nimport _ from \"lodash\";\n\nconst AddPositionDialogState = createStore({\n  name: \"AddPositionDialogState\",\n\n  initialState: {\n    show: false,\n    type: \"\",\n    address: \"\",\n    input: \"\",\n    name: \"\",\n    valid: false,\n    allTypes: PositionFactory.allTypes().sort(),\n  },\n\n  actions: {\n    show:\n      () =>\n      async ({ setState }) => {\n        setState({ show: true, type: \"\", address: \"\", input: \"\", name: \"\", valid: false });\n      },\n\n    closeDialog:\n      () =>\n      async ({ setState }) => {\n        setState({ show: false });\n      },\n\n    setType:\n      (type: string) =>\n      async ({ setState, getState }) => {\n        const valid = PositionFactory.isValidArgs(type, getState().address);\n        setState({ type, valid });\n      },\n\n    setAddress:\n      (address: string) =>\n      async ({ setState, getState }) => {\n        address = _.trim(address);\n        const valid = PositionFactory.isValidArgs(getState().type, address);\n        setState({ address, valid });\n      },\n\n    setInput:\n      (input: string) =>\n      async ({ setState }) => {\n        input = _.trim(input);\n        setState({ input });\n      },\n\n    setName:\n      (name: string) =>\n      async ({ setState }) => {\n        name = _.trim(name);\n        setState({ name });\n      },\n  },\n});\n\nexport const useAddPositionDialog = createHook(AddPositionDialogState);\n","import React from \"react\";\nimport { useAppActions, useIsAppConnected } from \"../state/AppState\";\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, InputLabel, MenuItem, Select, TextField } from \"@mui/material\";\nimport { useAllPositionsActions } from \"../state/AllPositionsState\";\nimport { useAddPositionDialog } from \"../state/AddPositionDialogState\";\n\nexport const AddPositionBtn = () => {\n  const [isConnected] = useIsAppConnected();\n  const [, actions] = useAddPositionDialog();\n  return (\n    <Button disabled={!isConnected} onClick={() => actions.show()}>\n      + Position\n    </Button>\n  );\n};\n\nexport const AddPositionDialog = () => {\n  const [, appActions] = useAppActions();\n  const [state, actions] = useAddPositionDialog();\n  const [, allPositionActions] = useAllPositionsActions();\n\n  const close = () => actions.closeDialog();\n\n  const add = () => appActions.withLoading(() => allPositionActions.addPosition(state.type, state.address, state.input, state.name)).then(close);\n\n  return (\n    <div>\n      <Dialog open={state.show} onClose={close}>\n        <DialogTitle style={{ minWidth: \"28em\" }}>Add Position</DialogTitle>\n\n        <DialogContent>\n          <br />\n          <FormControl fullWidth>\n            <InputLabel>Position Type</InputLabel>\n            <Select value={state.type} label=\"Position Type\" onChange={(e) => actions.setType(e.target.value)}>\n              <MenuItem value=\"\" />\n              {state.allTypes.map((type) => (\n                <MenuItem key={type} value={type}>\n                  {type}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n\n          <br />\n          <br />\n          <TextField fullWidth id=\"outlined-basic\" variant=\"outlined\" label=\"Target Address\" onChange={(e) => actions.setAddress(e.target.value)} />\n\n          <br />\n          <br />\n          {<TextField fullWidth id=\"outlined-basic\" variant=\"outlined\" label=\"Name?\" onChange={(e) => actions.setName(e.target.value)} />}\n\n          <br />\n          <br />\n          {<TextField fullWidth id=\"outlined-basic\" variant=\"outlined\" label=\"Input?\" onChange={(e) => actions.setInput(e.target.value)} />}\n\n          <br />\n          <br />\n        </DialogContent>\n        <DialogActions>\n          <Button size=\"large\" disabled={!state.valid} onClick={add}>\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport { useAllPositionRows, useAllPositions, useAllPositionsValuePerAssetClass, useAllPositionsValuePerChain, useAllPositionsValuePerPosition } from \"../state/AllPositionsState\";\nimport { DataGrid, GridColDef } from \"@mui/x-data-grid\";\nimport { useAppState } from \"../state/AppState\";\nimport { usePositionDialogActions } from \"../state/PositionDialogState\";\nimport { commafy } from \"@defi.org/web3-candies\";\nimport { Threat } from \"../positions/base/Position\";\nimport { ListItemText } from \"@mui/material\";\nimport { AddPositionBtn } from \"./AddPositionDialog\";\nimport { ArcElement, Chart as ChartJS, Legend, Tooltip } from \"chart.js\";\nimport { Pie } from \"react-chartjs-2\";\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\nconst columns: GridColDef[] = [\n  { field: \"loaded\", headerName: \"\", headerAlign: \"center\", width: 20, align: \"center\", valueFormatter: (v) => (v.value ? \"\" : \"\") },\n  { field: \"chain\", headerName: \"Chain\", headerAlign: \"center\", width: 120, align: \"left\" },\n  { field: \"name\", headerName: \"Position\", headerAlign: \"center\", width: 300, align: \"left\" },\n  {\n    field: \"health\",\n    headerName: \"Health\",\n    headerAlign: \"center\",\n    width: 100,\n    align: \"center\",\n    valueFormatter: (v) => {\n      if (!v.value || !(v.value as Threat[]).length) return \"\";\n      return (v.value as Threat[]).map((t) => t.message).join(\"\");\n    },\n  },\n  {\n    field: \"marketValue\",\n    headerName: \"Market Value\",\n    headerAlign: \"center\",\n    width: 100,\n    align: \"right\",\n    type: \"number\",\n    valueFormatter: (v) => \"$  \" + commafy((v.value as number).toFixed(0)),\n    sortable: true,\n  },\n  {\n    field: \"pending\",\n    headerName: \"Pending\",\n    headerAlign: \"center\",\n    width: 100,\n    align: \"right\",\n    type: \"number\",\n    valueFormatter: (v) => \"$  \" + commafy((v.value as number).toFixed(0)),\n    sortable: true,\n  },\n  {\n    field: \"tvl\",\n    headerName: \"TVL\",\n    headerAlign: \"center\",\n    width: 120,\n    align: \"right\",\n    type: \"number\",\n    valueFormatter: (v) => \"$  \" + commafy((v.value as number).toFixed(0)),\n    sortable: true,\n  },\n  { field: \"address\", headerName: \"Address\", headerAlign: \"center\", width: 450, align: \"left\" },\n];\n\nexport const AllPositionsTable = () => {\n  const [appState, appActions] = useAppState();\n  const [rows, actions] = useAllPositionRows(null);\n  const [positions] = useAllPositions();\n  const [, positionDialogActions] = usePositionDialogActions();\n  const [totalValuesPerChain] = useAllPositionsValuePerChain(null);\n  const [valuesPerPosition] = useAllPositionsValuePerPosition(null);\n  const [valuesPerAssetClass] = useAllPositionsValuePerAssetClass(null);\n\n  useEffect(() => {\n    if (appState.network?.id) appActions.withLoading(actions.load).then();\n  }, [appState.network, appActions, actions]);\n\n  const click = (p: any) => positionDialogActions.showPosition(positions[p.id.toString()]);\n\n  return (\n    <div style={{ height: \"100%\", width: \"90%\" }}>\n      <ListItemText>Total Market Value: $ {commafy(totalValuesPerChain.grandtotal)}</ListItemText>\n\n      <div style={{ display: \"flex\" }}>\n        <div>\n          <ListItemText>Value Per Chain:</ListItemText>\n          <Pie\n            data={{\n              labels: totalValuesPerChain.labels,\n              datasets: [\n                {\n                  data: totalValuesPerChain.values,\n                  backgroundColor: totalValuesPerChain.values.map((v, i) => colorOf(i)),\n                },\n              ],\n            }}\n            options={{ responsive: false, plugins: { legend: { display: false } } }}\n            height=\"200\"\n          />\n        </div>\n\n        <div>\n          <ListItemText>Value Per Position:</ListItemText>\n          <Pie\n            data={{\n              labels: valuesPerPosition.labels,\n              datasets: [\n                {\n                  data: valuesPerPosition.values,\n                  backgroundColor: valuesPerPosition.values.map((v, i) => colorOf(i)),\n                },\n              ],\n            }}\n            options={{ responsive: false, plugins: { legend: { display: false } } }}\n            height=\"200\"\n          />\n        </div>\n\n        <div>\n          <ListItemText>Value Per Asset Class:</ListItemText>\n          <Pie\n            data={{\n              labels: valuesPerAssetClass.labels,\n              datasets: [\n                {\n                  data: valuesPerAssetClass.values,\n                  backgroundColor: valuesPerAssetClass.values.map((v, i) => colorOf(i)),\n                },\n              ],\n            }}\n            options={{ responsive: false, plugins: { legend: { display: false } } }}\n            height=\"200\"\n          />\n        </div>\n      </div>\n\n      <br />\n\n      <DataGrid rows={rows} columns={columns} onCellClick={click} autoHeight hideFooter />\n\n      <br />\n      <AddPositionBtn />\n    </div>\n  );\n};\n\nfunction colorOf(num: number) {\n  return bgColors[num % bgColors.length];\n}\n\nconst bgColors = [\n  \"#413d5e\",\n  \"#495371\",\n  \"#638c93\",\n  \"#98B4AA\",\n  \"#F1E0AC\", //\n];\n","import React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  InputLabel,\n  MenuItem,\n  Select,\n  Switch,\n  TextField,\n} from \"@mui/material\";\nimport { usePositionDialogSelector } from \"../state/PositionDialogState\";\nimport { useAppState } from \"../state/AppState\";\nimport { useAllPositions } from \"../state/AllPositionsState\";\n\nexport const PositionDialog = () => {\n  const [, appStateActions] = useAppState();\n  const [selector, actions] = usePositionDialogSelector(null);\n  const [, allPositionsActions] = useAllPositions();\n\n  const close = () => actions.closeDialog();\n\n  const deletePos = () => appStateActions.withLoading(() => allPositionsActions.delete(selector.position!.getArgs().id)).then(close);\n\n  // const updatePos = () => appStateActions.withLoading(() => allPositionsActions.update(selector.position!, selector.position!.getArgs())).then(close);\n\n  const showData = () => appStateActions.showAlert(selector.rawData);\n\n  const harvest = () => appStateActions.withLoading(() => actions.harvest()).then(close);\n\n  const send = () => appStateActions.withLoading(() => actions.send()).then(close);\n\n  const call = () => appStateActions.withLoading(() => actions.call(appStateActions.showAlert));\n\n  return (\n    <div>\n      <Dialog open={!!selector.position} onClose={close}>\n        <DialogTitle>Position: {selector.position?.getArgs()?.name || selector.position?.getArgs()?.type}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Network: {selector.position?.getNetwork()?.name}</DialogContentText>\n          <DialogContentText>Address: {selector.position?.getArgs()?.address}</DialogContentText>\n          {selector.position?.getArgs()?.input && <DialogContentText>Input: {selector.position?.getArgs()?.input}</DialogContentText>}\n\n          <br />\n          <FormControl fullWidth>\n            <InputLabel>Method</InputLabel>\n            <Select value={selector.selectedMethod} label=\"Method\" onChange={(e) => actions.selectMethod(e.target.value)}>\n              {selector.positionMethods.map((m) => (\n                <MenuItem key={m} value={m}>\n                  {m}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n\n          <br />\n          {selector.selectedMethodArgTypes.length > 0 &&\n            selector.selectedMethodArgTypes.map((argType, i) => (\n              <TextField\n                key={argType + i}\n                autoFocus\n                margin=\"dense\"\n                id={argType + i}\n                label={argType}\n                type=\"text\"\n                fullWidth\n                variant=\"standard\"\n                onChange={(e) => actions.setMethodArg(i, e.target.value)}\n              />\n            ))}\n\n          <br />\n          <br />\n\n          <FormGroup>\n            <FormControlLabel control={<Switch checked={selector.useLegacy} onChange={(e: any) => actions.setUseLegacy(e.target.checked)} />} label=\"Use Legacy Transaction Type\" />\n          </FormGroup>\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={deletePos}>Delete Position</Button>\n\n          <Button onClick={showData}>Show Data</Button>\n\n          <Button onClick={harvest}>Just Harvest</Button>\n\n          <Button disabled={!selector.selectedMethod} onClick={call}>\n            Call Contract\n          </Button>\n\n          <Button disabled={!selector.selectedMethod} onClick={send}>\n            Send Transaction\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useAppState } from \"../state/AppState\";\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from \"@mui/material\";\n\nlet memAlert = \"\";\n\nexport const AlertDialog = () => {\n  const [appState, appStateActions] = useAppState();\n  memAlert = appState.alertDialog || memAlert;\n\n  const close = () => appStateActions.showAlert(\"\");\n\n  return (\n    <div>\n      <Dialog open={!!appState.alertDialog} onClose={close}>\n        <DialogTitle style={{ minWidth: \"28em\" }}>Alert</DialogTitle>\n\n        <DialogContent>\n          <DialogContentText style={{ whiteSpace: \"pre\" }}>{memAlert}</DialogContentText>\n        </DialogContent>\n\n        <DialogActions>\n          <Button size=\"large\" onClick={close}>\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Button, ButtonGroup } from \"@mui/material\";\nimport { loadPositionsFromStorage, savePositionsToStorage } from \"../state/AllPositionsState\";\nimport { PositionArgs } from \"../positions/base/Position\";\n\nconst downloadFile = (data: string, fileName: string, fileType: \"text/json\" | \"text/csv\") => {\n  const blob = new Blob([data], { type: fileType });\n\n  const a = document.createElement(\"a\");\n  a.download = fileName;\n  a.href = window.URL.createObjectURL(blob);\n  a.dispatchEvent(\n    new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n  );\n  a.remove();\n};\n\nconst exportPositionsJson = (e: any) => {\n  const data = JSON.stringify(loadPositionsFromStorage(), null, 2);\n  const name = `Positions-V1-${new Date().toISOString().split(\"T\")[0]}.json`;\n  downloadFile(data, name, \"text/json\");\n};\n\nconst importPositionsJson = (e: any) => {\n  const a = document.createElement(\"input\");\n  a.type = \"file\";\n  a.accept = \"application/json\";\n  a.hidden = true;\n  a.id = \"inputJsonFile\";\n  a.dispatchEvent(\n    new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n  );\n  a.addEventListener(\"change\", () => {\n    const file = a.files![0];\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const str = e.target?.result?.toString();\n      const data = JSON.parse(str || \"{}\") as Record<string, PositionArgs>;\n      console.log(\"parsed\", data);\n      savePositionsToStorage(data);\n      a.remove();\n      window.location.reload();\n    };\n    reader.readAsText(file, \"utf8\");\n  });\n};\n\nexport const ImportExport = () => {\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\" }}>\n      <ButtonGroup variant=\"outlined\" aria-label=\"outlined button group\">\n        <Button onClick={importPositionsJson}>Import JSON</Button>\n        <Button onClick={exportPositionsJson}>Export JSON</Button>\n      </ButtonGroup>\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { Backdrop, CircularProgress, createTheme, ThemeProvider } from \"@mui/material\";\nimport { useIsLoading } from \"./state/AppState\";\nimport { AppHeader } from \"./ui/AppHeader\";\nimport { AllPositionsTable } from \"./ui/AllPositionsTable\";\nimport { AddPositionDialog } from \"./ui/AddPositionDialog\";\nimport { PositionDialog } from \"./ui/PositionDialog\";\nimport { AlertDialog } from \"./ui/AlertDialog\";\nimport { ImportExport } from \"./ui/ImportExport\";\n\nconst darkTheme = createTheme({\n  palette: {\n    mode: \"dark\",\n  },\n});\n\nexport const App = () => {\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <div className=\"App\">\n        <AppHeader />\n\n        <AllPositionsTable />\n\n        <br />\n        <br />\n\n        <ImportExport />\n\n        <br />\n\n        <div>\n          <AddPositionDialog />\n          <PositionDialog />\n          <AlertDialog />\n        </div>\n\n        <div>\n          <Loading />\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n};\n\nconst Loading = () => {\n  const [loading] = useIsLoading();\n  return (\n    <Backdrop sx={{ color: \"#fff\", zIndex: (theme) => theme.zIndex.modal + 1 }} open={loading}>\n      <CircularProgress color=\"inherit\" />\n    </Backdrop>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport \"./index.css\";\nimport { Homepage } from \"./Homepage\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <div>\n        <Switch>\n          <Route path=\"/dashboard\" component={App} />\n          <Route path=\"/\" component={Homepage} />\n        </Switch>\n      </div>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals(console.log);\n","import React from \"react\";\nimport \"./Homepage.css\";\nimport OrbsLogo from \"./assets/orbs.png\";\nimport DeFiLogo from \"./assets/logo.svg\";\nimport LI1 from \"./assets/list-icon1.svg\";\nimport LI2 from \"./assets/list-icon2.svg\";\nimport LI3 from \"./assets/list-icon3.svg\";\nimport LI4 from \"./assets/list-icon4.svg\";\nimport LI5 from \"./assets/list-icon5.svg\";\nimport DotLine from \"./assets/dotted-line.svg\";\nimport Geom1 from \"./assets/geom1.png\";\nimport Geom2 from \"./assets/geom2.png\";\n\n/* eslint-disable */\nexport const Homepage = () => {\n  return (\n    <div>\n      <div className=\"PartnersSection row\" style={{ paddingTop: \"0px\" }}>\n        <div className=\"LogoSection column\">\n          <div className=\"StrategicPartnersLabel large\">MANAGING PARTNERS</div>\n          <div className=\"StrategicPartnersList row\" style={{ marginTop: \"25px\" }}>\n            <a className=\"OrbsLogo\" href=\"https://www.orbs.com\">\n              <img className=\"OrbsLogo\" src={OrbsLogo} alt={\"Orbs\"} />\n            </a>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"TitleSection column\">\n        <img className=\"logo\" src={DeFiLogo} />\n        <div>\n          <h1>\n            DeFi<span className=\"small\">.js</span>\n          </h1>\n          <p>Community-led initiative to standardize the management of Decentralized Finance positions programmatically</p>\n        </div>\n        <p>UNDER CONSTRUCTION</p>\n      </div>\n      <div className=\"LightSection column spaced\">\n        <h3>Simplify and standardize DeFi position management</h3>\n        <div className=\"IconList row\">\n          <div className=\"column\">\n            <img src={LI1} />\n            <p>Discover and quickly assess leading DeFi protocol strategies</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI2} />\n            <p>Monitor key position properties ex. APY, TVL, rewards</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI3} />\n            <p>Monitor position health and governance</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI4} />\n            <p>Compare historical performances between strategies</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI5} />\n            <p>Composability and interop with the ecosystem</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"DarkSection row DarkAbstract\">\n        <div className=\"Half column\">\n          <div className=\"SectionTitle\">\n            <h2>THE API</h2>\n            <img src={DotLine} />\n          </div>\n        </div>\n        <div className=\"Half column\">\n          <ul className=\"BulletList\">\n            <li>getNetwork(): Network</li>\n            <li>getAssets(): Token[]</li>\n            <li>getRewardAssets(): Token[]</li>\n            <li>getTVL(): Promise&lt;BN&gt;</li>\n            <li>getAPR(): Promise&lt;BN&gt;</li>\n            <li>getHealth(): Promise&lt;Threat[]&gt;</li>\n            <li>getPendingRewards(): Promise&lt;TokenAmount[]&gt;</li>\n          </ul>\n        </div>\n      </div>\n\n      <div className=\"Footer row\">\n        <span> 2020 defi.org</span>\n        <a href=\"https://www.announcements.defi.org/\">Announcements</a>\n        <a href=\"https://www.privacypolicies.com/generic/\">Privacy</a>\n        <a href=\"https://github.com/defi-org-code\">GitHub</a>\n        <a href=\"https://t.me/defiorg\">Telegram</a>\n        <a href=\"mailto:hello@defi.org\">hello@defi.org</a>\n      </div>\n\n      <div id=\"geometry_container\" hidden={true}>\n        <div style={{ width: \"15%\", maxWidth: \"180px\", position: \"absolute\", left: \"15%\", top: \"-70px\" }}>\n          <img src={Geom1} width=\"100%\" />\n        </div>\n        <div style={{ width: \"15%\", maxWidth: \"360px\", position: \"absolute\", left: \"70%\", top: \"20px\" }}>\n          <img src={Geom2} width=\"100%\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"sourceRoot":""}