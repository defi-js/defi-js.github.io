{"version":3,"sources":["reportWebVitals.ts","assets/orbs.png","assets/logo.svg","assets/list-icon1.svg","assets/list-icon2.svg","assets/list-icon3.svg","assets/list-icon4.svg","assets/list-icon5.svg","assets/dotted-line.svg","assets/geom1.png","assets/geom2.png","state/AppState.ts","positions/base/PositionFactory.ts","positions/base/PriceOracle.ts","positions/Pancakeswap.ts","positions/base/Position.ts","positions/Loops.ts","positions/index.ts","state/AllPositionsState.ts","state/AddPositionDialogState.ts","ui/AddPositionDialog.tsx","ui/AppHeader.tsx","state/PositionDialogState.ts","ui/AllPositionsTable.tsx","ui/PositionDialog.tsx","App.tsx","index.tsx","Homepage.tsx","positions/ElrondMaiar.ts","../node_modules/@elrondnetwork/bls-wasm sync /^/.//.*/.js$"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","AppState","createStore","name","initialState","loading","wallet","balance","zero","network","actions","connect","a","setState","_withLoading","ethereum","window","alert","_onConnect","on","withLoading","thunk","t","message","setWeb3Instance","Web3","account","getNetwork","bn","web3","eth","getBalance","useAppState","createHook","useIsAppConnected","selector","state","utils","isAddress","coingeckoIds","bsc","poly","PriceOracle","prices","token","amount","id","tokenId","address","this","esdt","fetchPricesElrond","fetchPrices","mul","div","ether","coingeckoId","_","find","v","k","shortname","addresses","fetch","join","response","json","result","mapKeys","toChecksumAddress","mapValues","bn18","usd","value","updateResults","tokenIds","body","variables","i","query","map","headers","accept","pragma","JSON","stringify","method","data","inputs","results","isEmpty","Error","merge","registry","oracle","types","keys","args","type","p","current","startsWith","Address","fromString","e","isElrondAddress","PositionFactory","Severity","Farm","asset0","asset1","lpToken","poolId","masterchef","contracts","Pancakeswap_Masterchef","cake","erc20s","CAKE","amount0","amount1","value0","value1","rewardAmount","rewardValue","getData","getAmounts","asset","getPendingRewards","getContractMethods","functions","methods","networks","Promise","userInfo","call","getReserves","token0","totalSupply","pendingCake","all","reserves","pending","_reserve0","_reserve1","r0","toLowerCase","r1","amountLP","valueOf","useLegacyTx","tx","options","encodeABI","from","send","deposit","Pancakeswap","AaveLoop","WARN_HEALTH_FACTOR","instance","contract","require","USDC","rewardAsset","Aave_stkAAVE","aave","AAVE","weth","WETH","healthFactor","totalCollateralETH","totalCollateralValue","totalDebtETH","totalDebtValue","isZero","lt","severity","Critical","getPositionData","posData","getBalanceReward","claimRewardsToOwner","CompoundLoop","WARN_LIQUIDITY_PERCENT_OF_SUPPLY","COMP","borrowBalance","supplyBalance","accountLiquidity","accountShortfall","minLiquidity","muln","divn","to18","borrowBalanceCurrent","Compound_cUSDC","balanceOfUnderlying","getAccountLiquidityWithInterest","claimAndTransferAllCompToOwner","Loops","register","BUSD","WBNB","Pancakeswap_LP_BUSD_BNB","Pancakeswap_LP_CAKE_BNB","ORBS","Pancakeswap_LP_ORBS_BUSD","ElrondMaiar","tokens","EGLD","MEX","STORAGE_KEY","loadFromStorage","parse","localStorage","getItem","saveToStorage","setItem","AllPositionsState","positions","load","dispatch","addPosition","getState","position","create","getArgs","delete","posId","sendTransaction","harvest","console","log","catch","useAllPositionsActions","useAllPositionRows","createSelector","values","sortBy","amounts","fmtAmounts","health","fmtHealth","getHealth","useAllPositions","amnt","fmt18","split","length","AddPositionDialogState","show","valid","allTypes","closeDialog","setType","isValidInput","setAddress","useAddPositionDialog","AddPositionBtn","isConnected","Button","variant","size","disabled","onClick","AddPositionDialog","appStateActions","allPositionActions","close","Dialog","open","onClose","DialogTitle","style","minWidth","DialogContent","FormControl","fullWidth","InputLabel","Select","label","onChange","target","MenuItem","TextField","DialogActions","AppHeader","fontSize","display","flexDirection","justifyContent","ConnectBtn","WalletInfo","PositionDialogState","useLegacy","selectedMethod","selectedMethodArgs","showPosition","selectMethod","setMethodArg","index","arg","setUseLegacy","usePositionDialogActions","usePositionDialogSelector","filter","m","endsWith","substring","indexOf","positionMethods","selectedMethodArgTypes","columns","field","headerName","width","AllPositionsTable","appState","appActions","rows","positionDialogActions","useEffect","height","onCellClick","toString","PositionDialog","allPositionsActions","DialogContentText","argType","autoFocus","margin","FormGroup","FormControlLabel","control","Switch","checked","darkTheme","createTheme","palette","mode","Loading","Backdrop","sx","color","zIndex","theme","modal","CircularProgress","ReactDOM","render","StrictMode","path","component","ThemeProvider","className","paddingTop","marginTop","href","src","OrbsLogo","alt","DeFiLogo","LI1","LI2","LI3","LI4","LI5","DotLine","hidden","maxWidth","left","top","Geom1","Geom2","document","getElementById","base64","s","Buffer","erc20","zeroAddress","provider","ProxyProvider","timeout","assets","getAssets","getRewardAssets","every","getAddressEsdtList","esdts","farmNfts","tokenIdentifier","getAccount","farm","SmartContract","runQuery","func","ContractFunction","returnData","lpReserve","farmNftSupply","farmNftBalance","nft","reduce","sum","b","add","farmNftPercentOfSupply","lpReserveBalance","pair","BigUIntValue","BigNumber","tokensForPositionRaw","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","Object","resolve","module","exports"],"mappings":"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","file":"static/js/main.9dd89066.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export default __webpack_public_path__ + \"static/media/orbs.edf8d68f.png\";","export default __webpack_public_path__ + \"static/media/logo.c2738899.svg\";","export default __webpack_public_path__ + \"static/media/list-icon1.18bcd298.svg\";","export default __webpack_public_path__ + \"static/media/list-icon2.4b928706.svg\";","export default __webpack_public_path__ + \"static/media/list-icon3.596f4d83.svg\";","export default __webpack_public_path__ + \"static/media/list-icon4.cd9ac7ff.svg\";","export default __webpack_public_path__ + \"static/media/list-icon5.5be90266.svg\";","export default __webpack_public_path__ + \"static/media/dotted-line.a7040ce9.svg\";","export default __webpack_public_path__ + \"static/media/geom1.75a84b0d.png\";","export default __webpack_public_path__ + \"static/media/geom2.3a3b2e04.png\";","import Web3 from \"web3\";\nimport { createHook, createStore } from \"react-sweet-state\";\nimport { account, bn, getNetwork, Network, setWeb3Instance, web3, zero } from \"@defi.org/web3-candies\";\n\n// defaults.middlewares.add((storeState: any) => (next: any) => (arg: any) => {\n//   const result = next(arg);\n//   console.log(storeState.key, \":\", storeState.getState());\n//   return result;\n// });\n\nconst AppState = createStore({\n  name: \"AppState\",\n\n  initialState: {\n    loading: false,\n    wallet: \"\",\n    balance: zero,\n    network: {} as Network,\n  },\n\n  actions: {\n    connect:\n      () =>\n      async ({ setState }) => {\n        await _withLoading(setState, async () => {\n          setState({ wallet: \"\", balance: zero, network: {} as Network });\n\n          const ethereum = (window as any).ethereum;\n          if (!ethereum) {\n            alert(\"install metamask\");\n            return;\n          }\n          await _onConnect(setState, ethereum);\n\n          ethereum.on(\"accountsChanged\", () => {\n            _onConnect(setState, ethereum);\n          });\n          ethereum.on(\"chainChanged\", () => {\n            _onConnect(setState, ethereum);\n          });\n        });\n      },\n\n    withLoading:\n      (thunk: () => any) =>\n      async ({ setState }) => {\n        await _withLoading(setState, thunk);\n      },\n  },\n});\n\nasync function _withLoading(setState: any, t: () => Promise<void>) {\n  try {\n    setState({ loading: true });\n    await t();\n  } catch (e: any) {\n    alert(`${e.message}`);\n  } finally {\n    setState({ loading: false });\n  }\n}\n\nasync function _onConnect(setState: any, ethereum: any) {\n  setWeb3Instance(new Web3(ethereum));\n  const wallet = await account();\n  setState({\n    wallet,\n    network: await getNetwork(),\n    balance: bn(await web3().eth.getBalance(wallet)),\n  });\n}\n\nexport const useAppState = createHook(AppState);\nexport const useIsAppConnected = createHook(AppState, {\n  selector: (state) => Web3.utils.isAddress(state.wallet),\n});\n","import _ from \"lodash\";\nimport { Position, PositionArgs } from \"./Position\";\nimport { PriceOracle } from \"./PriceOracle\";\nimport { Network } from \"@defi.org/web3-candies\";\nimport Web3 from \"web3\";\nimport { Address } from \"@elrondnetwork/erdjs/out\";\n\ntype Factory = (args: PositionArgs, oracle: PriceOracle) => Position;\n\nconst registry = {} as Record<string, Factory>;\n\nexport namespace PositionFactory {\n  const oracle = new PriceOracle();\n\n  export function register(types: Record<string, Factory>) {\n    _.merge(registry, types);\n  }\n\n  export function allTypes() {\n    return _.keys(registry);\n  }\n\n  export function create(args: PositionArgs): Position | null {\n    if (!registry[args.type]) return null;\n\n    if (!args.id) args.id = args.type + \":\" + args.address;\n\n    return registry[args.type](args, oracle);\n  }\n\n  export function shouldLoad(p: Position, current: Network) {\n    return p.getNetwork().id === current.id || p.getNetwork().id < 0; // non-web3 network\n  }\n\n  export function isValidInput(type: string, address: string) {\n    return !!type && (Web3.utils.isAddress(address) || isElrondAddress(type, address));\n  }\n\n  function isElrondAddress(type: string, address: string) {\n    try {\n      return type.startsWith(\"egld:\") && address.startsWith(\"erd1\") && !Address.fromString(address).isEmpty();\n    } catch (e) {\n      return false;\n    }\n  }\n}\n","import _ from \"lodash\";\nimport BN from \"bn.js\";\nimport Web3 from \"web3\";\nimport { bn18, ether, getNetwork, Token } from \"@defi.org/web3-candies\";\n\nconst coingeckoIds = {\n  eth: \"ethereum\",\n  bsc: \"binance-smart-chain\",\n  poly: \"polygon-pos\",\n};\n\nexport class PriceOracle {\n  prices: Record<string, BN> = {};\n\n  async valueOf(token: Token, amount: BN): Promise<BN> {\n    const id = (token as any).tokenId || token.address;\n    if (!this.prices[id]) {\n      if ((token as any).esdt) await this.fetchPricesElrond(id);\n      else await this.fetchPrices(id);\n    }\n\n    return amount.mul(this.prices[id]).div(ether);\n  }\n\n  /**\n   * returns price in USD 18 decimals by token address\n   */\n  async fetchPrices(...addresses: string[]): Promise<{ [address: string]: BN }> {\n    const network = await getNetwork();\n    const coingeckoId = _.find(coingeckoIds, (v, k) => k === network.shortname)!;\n    const response = await fetch(`https://api.coingecko.com/api/v3/simple/token_price/${coingeckoId}?contract_addresses=${addresses.join(\",\")}&vs_currencies=usd`);\n    const json = (await response.json()) as Record<string, any>;\n\n    const result = _(json)\n      .mapKeys((v, k) => Web3.utils.toChecksumAddress(k))\n      .mapValues((v) => bn18(v.usd))\n      .value();\n\n    return this.updateResults(addresses, result);\n  }\n\n  /**\n   * returns price in USD 18 decimals by token ID\n   */\n  async fetchPricesElrond(...tokenIds: string[]): Promise<{ [address: string]: BN }> {\n    const body = {\n      variables: _.mapKeys(tokenIds, (id, i) => `token${i}`),\n      query: `query (${_.map(tokenIds, (id, i) => `$token${i}: String!`).join(\", \")}) {\n              ${_.map(tokenIds, (id, i) => `token${i}: getTokenPriceUSD(tokenID: $token${i})`).join(\"\\n\")}\n            }`,\n    };\n    const response = await fetch(\"https://graph.maiar.exchange/graphql\", {\n      headers: {\n        accept: \"*/*\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        pragma: \"no-cache\",\n      },\n      body: JSON.stringify(body),\n      method: \"POST\",\n    });\n    const json = await response.json();\n\n    const result = _(json.data)\n      .mapKeys((v, k) => body.variables[k])\n      .mapValues((v) => bn18(v))\n      .value();\n\n    return this.updateResults(tokenIds, result);\n  }\n\n  updateResults(inputs: any, results: { [p: string]: BN }) {\n    if (_.isEmpty(results)) throw new Error(`no price for ${inputs}`);\n    return _.merge(this.prices, results);\n  }\n}\n","import { Position, PositionArgs } from \"./base/Position\";\nimport { account, bn, contracts, erc20s, getNetwork, networks, Token, zero } from \"@defi.org/web3-candies\";\nimport type { PancakeswapLPAbi } from \"@defi.org/web3-candies/typechain-abi/PancakeswapLPAbi\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport _ from \"lodash\";\n\nexport namespace Pancakeswap {\n  // const POOL_ID_MAPPING_URL = \"https://raw.githubusercontent.com/pancakeswap/pancake-frontend/master/src/config/constants/farms.ts\";\n\n  export class Farm implements Position {\n    masterchef = contracts.bsc.Pancakeswap_Masterchef();\n    cake = erc20s.bsc.CAKE();\n\n    data = {\n      amount0: zero,\n      amount1: zero,\n      value0: zero,\n      value1: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n    };\n\n    constructor(\n      public args: PositionArgs,\n      public oracle: PriceOracle,\n      public asset0: Token,\n      public asset1: Token,\n      public lpToken: Token & PancakeswapLPAbi,\n      public poolId: number\n    ) {}\n\n    getArgs() {\n      return this.args;\n    }\n\n    getNetwork() {\n      return networks.bsc;\n    }\n\n    getAssets() {\n      return [this.asset0, this.asset1];\n    }\n\n    getRewardAssets() {\n      return [this.cake];\n    }\n\n    getData = () => this.data;\n\n    getHealth() {\n      return [];\n    }\n\n    getAmounts = () => [\n      {\n        asset: this.asset0,\n        amount: this.data.amount0,\n        value: this.data.value0,\n      },\n      {\n        asset: this.asset1,\n        amount: this.data.amount1,\n        value: this.data.value1,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.cake,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    async load() {\n      if ((await getNetwork()).id !== this.getNetwork().id) return;\n\n      const [userInfo, reserves, token0, totalSupply, pending] = await Promise.all([\n        await this.masterchef.methods.userInfo(this.poolId, this.args.address).call(),\n        await this.lpToken.methods.getReserves().call(),\n        await this.lpToken.methods.token0().call(),\n        await this.lpToken.methods.totalSupply().call(),\n        await this.masterchef.methods.pendingCake(this.poolId, this.args.address).call(),\n      ]);\n      const { _reserve0, _reserve1 } = reserves;\n      const r0 = token0.toLowerCase() === this.asset0.address.toLowerCase() ? _reserve0 : _reserve1;\n      const r1 = r0 === _reserve0 ? _reserve1 : _reserve0;\n      const amountLP = bn(userInfo.amount);\n      this.data.amount0 = bn(r0).mul(amountLP).div(bn(totalSupply));\n      this.data.amount1 = bn(r1).mul(amountLP).div(bn(totalSupply));\n      this.data.value0 = await this.oracle.valueOf(this.asset0, this.data.amount0);\n      this.data.value1 = await this.oracle.valueOf(this.asset1, this.data.amount1);\n      this.data.rewardAmount = bn(pending);\n      this.data.rewardValue = await this.oracle.valueOf(this.cake, this.data.rewardAmount);\n    }\n\n    getContractMethods = () => _.functions(this.masterchef.methods);\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.masterchef.methods as any)[method](...args);\n      alert(`target:\\n${this.masterchef.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await tx.send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" } as any);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await this.masterchef.methods.deposit(this.poolId, 0).send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" } as any);\n    }\n  }\n}\n","import BN from \"bn.js\";\nimport { Network, Token } from \"@defi.org/web3-candies\";\n\nexport type PositionArgs = {\n  type: string;\n  id: string;\n  address: string;\n};\n\nexport interface Position {\n  getArgs(): PositionArgs;\n  getNetwork(): Network;\n  getAssets(): Token[];\n  getRewardAssets(): Token[];\n  // /**\n  //  * USD, 18 decimals\n  //  */\n  // getTVL(): Promise<BN>;\n\n  // /**\n  //  * Percent spot annual rate without compounding, 18 decimals (123% == 1.23*10^18).\n  //  */\n  // getAPR(): Promise<BN>;\n\n  // getGovernance\n  load(): Promise<void>;\n  getData(): { [key: string]: BN | string | number };\n  getHealth(): Threat[];\n  getAmounts(): TokenAmount[];\n  getPendingRewards(): TokenAmount[];\n\n  getContractMethods(): string[];\n  sendTransaction(method: string, args: string[], useLegacyTx: boolean): Promise<void>;\n  harvest(useLegacyTx: boolean): Promise<void>;\n}\n\nexport interface TokenAmount {\n  asset: Token;\n  /**\n   * ERC20 amount\n   */\n  amount: BN;\n  /**\n   * USD, 18 decimals\n   */\n  value: BN;\n}\n\nexport enum Severity {\n  Critical,\n  High,\n  Medium,\n  Low,\n}\n\nexport interface Threat {\n  severity: Severity;\n  message: string;\n}\n","import { Position, PositionArgs, Severity } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { account, bn, bn18, contract, erc20s, getNetwork, networks, to18, zero } from \"@defi.org/web3-candies\";\nimport type { AaveLoopAbi } from \"../../typechain-abi/AaveLoopAbi\";\nimport type { CompoundLoopAbi } from \"../../typechain-abi/CompoundLoopAbi\";\nimport _ from \"lodash\";\n\nexport namespace Loops {\n  /**\n   * Aave on Ethereum\n   */\n  export class AaveLoop implements Position {\n    WARN_HEALTH_FACTOR = bn18(\"1.0641\");\n\n    instance = contract<AaveLoopAbi>(require(\"../abi/AaveLoopAbi.json\"), this.args.address);\n    asset = erc20s.eth.USDC();\n    rewardAsset = erc20s.eth.Aave_stkAAVE();\n    aave = erc20s.eth.AAVE();\n    weth = erc20s.eth.WETH();\n\n    data = {\n      healthFactor: zero,\n      totalCollateralETH: zero,\n      totalCollateralValue: zero,\n      totalDebtETH: zero,\n      totalDebtValue: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {}\n\n    getArgs() {\n      return this.args;\n    }\n\n    getNetwork() {\n      return networks.eth;\n    }\n\n    getAssets() {\n      return [this.asset];\n    }\n\n    getRewardAssets() {\n      return [this.rewardAsset];\n    }\n\n    getData = () => this.data;\n\n    getHealth() {\n      if (!this.data.healthFactor.isZero() && this.data.healthFactor.lt(this.WARN_HEALTH_FACTOR)) {\n        return [\n          {\n            severity: Severity.Critical,\n            message: \"Low Health Factor!\",\n          },\n        ];\n      }\n      return [];\n    }\n\n    getAmounts = () => [\n      {\n        asset: this.asset,\n        amount: this.data.totalCollateralETH,\n        value: this.data.totalCollateralValue,\n      },\n      {\n        asset: this.asset,\n        amount: this.data.totalDebtETH,\n        value: this.data.totalDebtValue,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.rewardAsset,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    async load() {\n      if ((await getNetwork()).id !== this.getNetwork().id) return;\n\n      const posData = await this.instance.methods.getPositionData().call();\n      this.data.healthFactor = bn(posData.healthFactor);\n      this.data.totalCollateralETH = bn(posData.totalCollateralETH);\n      this.data.totalDebtETH = bn(posData.totalDebtETH);\n      this.data.totalCollateralValue = await this.oracle.valueOf(this.weth, this.data.totalCollateralETH);\n      this.data.totalDebtValue = await this.oracle.valueOf(this.weth, this.data.totalDebtETH);\n      this.data.rewardAmount = bn(await this.instance.methods.getBalanceReward().call());\n      this.data.rewardValue = await this.oracle.valueOf(this.aave, this.data.rewardAmount);\n    }\n\n    getContractMethods = () => _.functions(this.instance.methods);\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.instance.methods as any)[method](...args);\n      alert(`target:\\n${this.instance.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await tx.send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" } as any);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await this.instance.methods.claimRewardsToOwner().send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" } as any);\n    }\n  }\n\n  /**\n   * Compound on ethereum\n   */\n  export class CompoundLoop implements Position {\n    WARN_LIQUIDITY_PERCENT_OF_SUPPLY = 0.25; // percent of total supply 0.25% => ex. $10M principal, $40M supply, $100k min liquidity\n\n    instance = contract<CompoundLoopAbi>(require(\"../abi/CompoundLoopAbi.json\"), this.args.address);\n    asset = erc20s.eth.USDC();\n    rewardAsset = erc20s.eth.COMP();\n\n    data = {\n      borrowBalance: zero,\n      supplyBalance: zero,\n      rewardAmount: zero,\n      rewardValue: zero,\n      accountLiquidity: zero,\n      accountShortfall: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle) {}\n\n    getArgs() {\n      return this.args;\n    }\n\n    getNetwork() {\n      return networks.eth;\n    }\n\n    getAssets() {\n      return [this.asset];\n    }\n\n    getRewardAssets() {\n      return [this.rewardAsset];\n    }\n\n    getData = () => this.data;\n\n    getAmounts = () => [\n      {\n        asset: this.asset,\n        amount: this.data.supplyBalance,\n        value: this.data.supplyBalance,\n      },\n      {\n        asset: this.asset,\n        amount: this.data.borrowBalance,\n        value: this.data.borrowBalance,\n      },\n    ];\n\n    getPendingRewards = () => [\n      {\n        asset: this.rewardAsset,\n        amount: this.data.rewardAmount,\n        value: this.data.rewardValue,\n      },\n    ];\n\n    getHealth() {\n      const minLiquidity = this.data.supplyBalance.muln(this.WARN_LIQUIDITY_PERCENT_OF_SUPPLY).divn(100);\n      if (!this.data.accountShortfall.isZero() || bn(this.data.accountLiquidity).lt(minLiquidity)) {\n        return [\n          {\n            severity: Severity.Critical,\n            message: \"Low Liquidity!\",\n          },\n        ];\n      }\n      return [];\n    }\n\n    async load() {\n      if ((await getNetwork()).id !== this.getNetwork().id) return;\n\n      this.data.borrowBalance = to18(await this.instance.methods.borrowBalanceCurrent().call(), 6);\n      this.data.supplyBalance = to18(await erc20s.eth.Compound_cUSDC().methods.balanceOfUnderlying(this.args.address).call(), 6);\n      this.data.rewardAmount = bn(await this.instance.methods[\"claimComp()\"]().call());\n      this.data.rewardValue = await this.oracle.valueOf(this.rewardAsset, this.data.rewardAmount);\n      const { accountLiquidity, accountShortfall } = await this.instance.methods.getAccountLiquidityWithInterest().call();\n      this.data.accountLiquidity = bn(accountLiquidity);\n      this.data.accountShortfall = bn(accountShortfall);\n    }\n\n    getContractMethods = () => _.functions(this.instance.methods);\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {\n      const tx = (this.instance.methods as any)[method](...args);\n      alert(`target:\\n${this.instance.options.address}\\ndata:\\n${tx.encodeABI()}`);\n      await tx.send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" } as any);\n    }\n\n    async harvest(useLegacyTx: boolean) {\n      await this.instance.methods.claimAndTransferAllCompToOwner().send({ from: await account(), type: useLegacyTx ? \"0x0\" : \"0x2\" } as any);\n    }\n  }\n}\n","import { PositionFactory } from \"./base/PositionFactory\";\nimport { erc20s } from \"@defi.org/web3-candies\";\nimport { Pancakeswap } from \"./Pancakeswap\";\nimport { Loops } from \"./Loops\";\nimport { ElrondMaiar } from \"./ElrondMaiar\";\n\nexport function registerAllPositions() {\n  PositionFactory.register({\n    \"bsc:Pancakeswap:Farm:BUSD/BNB\": (args, oracle) => new Pancakeswap.Farm(args, oracle, erc20s.bsc.BUSD(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_BUSD_BNB(), 252),\n    \"bsc:Pancakeswap:Farm:CAKE/BNB\": (args, oracle) => new Pancakeswap.Farm(args, oracle, erc20s.bsc.CAKE(), erc20s.bsc.WBNB(), erc20s.bsc.Pancakeswap_LP_CAKE_BNB(), 251),\n    \"bsc:Pancakeswap:Farm:ORBS/BUSD\": (args, oracle) => new Pancakeswap.Farm(args, oracle, erc20s.bsc.ORBS(), erc20s.bsc.BUSD(), erc20s.bsc.Pancakeswap_LP_ORBS_BUSD(), 416),\n\n    \"eth:Loops:AaveLoop\": (args, oracle) => new Loops.AaveLoop(args, oracle),\n    \"eth:Loops:CompoundLoop\": (args, oracle) => new Loops.CompoundLoop(args, oracle),\n\n    \"egld:Maiar:Farm:USDC/EGLD\": (args, oracle) => new ElrondMaiar.Farm(args, oracle, [ElrondMaiar.tokens.USDC(), ElrondMaiar.tokens.EGLD()]),\n    \"egld:Maiar:Farm:MEX/EGLD\": (args, oracle) => new ElrondMaiar.Farm(args, oracle, [ElrondMaiar.tokens.MEX(), ElrondMaiar.tokens.EGLD()]),\n    \"egld:Maiar:Farm:MEX\": (args, oracle) => new ElrondMaiar.Farm(args, oracle, [ElrondMaiar.tokens.MEX()]),\n  });\n}\n","import _ from \"lodash\";\nimport { createHook, createSelector, createStore, StoreActionApi } from \"react-sweet-state\";\nimport { Position, PositionArgs, Threat, TokenAmount } from \"../positions/base/Position\";\nimport { PositionFactory } from \"../positions/base/PositionFactory\";\nimport { registerAllPositions } from \"../positions\";\nimport { fmt18 } from \"@defi.org/web3-candies\";\n\nregisterAllPositions();\n\nconst STORAGE_KEY = \"PositionArgs:v1\";\nconst loadFromStorage = () => JSON.parse(localStorage.getItem(STORAGE_KEY) || \"{}\") as Record<string, PositionArgs>;\nconst saveToStorage = (data: Record<string, PositionArgs>) => localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n\nconst AllPositionsState = createStore({\n  name: \"AllPositionsState\",\n\n  initialState: {\n    positions: {} as Record<string, Position>,\n  },\n\n  actions: {\n    load:\n      () =>\n      async ({ dispatch }) => {\n        await dispatch(load);\n      },\n\n    addPosition:\n      (type: string, address: string) =>\n      async ({ getState, dispatch }) => {\n        const position = PositionFactory.create({ type, address, id: \"\" });\n        if (!position) {\n          alert(`unknown type ${type} at ${address}`);\n          return;\n        }\n\n        const data = _.mapValues(getState().positions, (p) => p.getArgs());\n        data[position.getArgs().id] = position.getArgs();\n        saveToStorage(data);\n        await dispatch(load);\n      },\n\n    delete:\n      (posId: string) =>\n      async ({ getState, dispatch }) => {\n        const data = _.mapValues(getState().positions, (p) => p.getArgs());\n        delete data[posId];\n        saveToStorage(data);\n        await dispatch(load);\n      },\n\n    sendTransaction:\n      (posId: string, useLegacyTx: boolean, method: string, args: string[]) =>\n      async ({ getState }) => {\n        await getState().positions[posId].sendTransaction(method, args, useLegacyTx);\n      },\n\n    harvest:\n      (posId: string, useLegacyTx: boolean) =>\n      async ({ getState }) => {\n        await getState().positions[posId].harvest(useLegacyTx);\n      },\n  },\n});\n\nasync function load({ getState, setState }: StoreActionApi<typeof AllPositionsState.initialState>) {\n  console.log(\"LOAD\");\n  const current = getState().positions;\n  const positions = _.mapValues(loadFromStorage(), (args) => current[args.id] || PositionFactory.create(args));\n  await Promise.all(_.map(positions, (p) => p.load().catch((e) => console.log(e))));\n  setState({ positions });\n}\n\nexport const useAllPositionsActions = createHook(AllPositionsState, { selector: null });\nexport const useAllPositionRows = createHook(AllPositionsState, {\n  selector: createSelector(\n    (state) =>\n      _(state.positions)\n        .values()\n        .sortBy((p) => p.getArgs().type)\n        .value(),\n    (positions) =>\n      _.map(positions, (p) => ({\n        id: p.getArgs().id,\n        type: p.getArgs().type,\n        amounts: fmtAmounts(p.getAmounts()),\n        pending: fmtAmounts(p.getPendingRewards()),\n        health: fmtHealth(p.getHealth()),\n        position: p,\n      }))\n  ),\n});\nexport const useAllPositions = createHook(AllPositionsState, {\n  selector: (state) => state.positions,\n});\n\nfunction fmtAmounts(amnt: TokenAmount[]) {\n  return _(amnt)\n    .map((a) => `${a.asset.name}: ${fmt18(a.amount).split(\".\")[0]} = $${fmt18(a.value).split(\".\")[0]}`)\n    .join(\" + \");\n}\n\nfunction fmtHealth(health: Threat[]) {\n  if (!health.length) return \"🟢\";\n  return health.map((t) => t.message).join(\"⚠️\");\n}\n","import { createHook, createStore } from \"react-sweet-state\";\nimport { PositionFactory } from \"../positions/base/PositionFactory\";\n\nconst AddPositionDialogState = createStore({\n  name: \"AddPositionDialogState\",\n\n  initialState: {\n    show: false,\n    type: \"\",\n    address: \"\",\n    valid: false,\n    allTypes: PositionFactory.allTypes(),\n  },\n\n  actions: {\n    show:\n      () =>\n      async ({ setState }) => {\n        setState({ show: true, type: \"\", address: \"\", valid: false });\n      },\n\n    closeDialog:\n      () =>\n      async ({ setState }) => {\n        setState({ show: false });\n      },\n\n    setType:\n      (type: string) =>\n      async ({ setState, getState }) => {\n        const valid = PositionFactory.isValidInput(type, getState().address);\n        setState({ type, valid });\n      },\n\n    setAddress:\n      (address: string) =>\n      async ({ setState, getState }) => {\n        const valid = PositionFactory.isValidInput(getState().type, address);\n        setState({ address, valid });\n      },\n  },\n});\n\nexport const useAddPositionDialog = createHook(AddPositionDialogState);\n","import React from \"react\";\nimport { useAppState, useIsAppConnected } from \"../state/AppState\";\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, InputLabel, MenuItem, Select, TextField } from \"@mui/material\";\nimport { useAllPositionsActions } from \"../state/AllPositionsState\";\nimport { useAddPositionDialog } from \"../state/AddPositionDialogState\";\n\nexport const AddPositionBtn = () => {\n  const [isConnected] = useIsAppConnected();\n  const [, actions] = useAddPositionDialog();\n  return (\n    <Button variant={\"contained\"} size={\"large\"} disabled={!isConnected} onClick={() => actions.show()}>\n      Add Position\n    </Button>\n  );\n};\n\nexport const AddPositionDialog = () => {\n  const [, appStateActions] = useAppState();\n  const [state, actions] = useAddPositionDialog();\n  const [, allPositionActions] = useAllPositionsActions();\n\n  const close = () => actions.closeDialog();\n\n  const add = () => appStateActions.withLoading(() => allPositionActions.addPosition(state.type, state.address)).then(close);\n\n  return (\n    <div>\n      <Dialog open={state.show} onClose={close}>\n        <DialogTitle style={{ minWidth: \"28em\" }}>Add Position</DialogTitle>\n\n        <DialogContent>\n          <br />\n          <FormControl fullWidth>\n            <InputLabel>Position Type</InputLabel>\n            <Select value={state.type} label=\"Position Type\" onChange={(e) => actions.setType(e.target.value)}>\n              <MenuItem value=\"\" />\n              {state.allTypes.map((type) => (\n                <MenuItem key={type} value={type}>\n                  {type}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n\n          <br />\n          <br />\n          <TextField fullWidth id=\"outlined-basic\" variant=\"outlined\" label=\"Target Address\" onChange={(e) => actions.setAddress(e.target.value)} />\n\n          <br />\n          <br />\n        </DialogContent>\n        <DialogActions>\n          <Button size=\"large\" disabled={!state.valid} onClick={add}>\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { AddPositionBtn } from \"./AddPositionDialog\";\nimport { useAppState, useIsAppConnected } from \"../state/AppState\";\nimport { Button } from \"@mui/material\";\nimport { fmt18 } from \"@defi.org/web3-candies\";\n\nexport const AppHeader = () => (\n  <div style={{ fontSize: \"large\", minWidth: \"42em\" }}>\n    <br />\n    <br />\n\n    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\" }}>\n      <ConnectBtn />\n\n      <AddPositionBtn />\n    </div>\n\n    <div />\n    <WalletInfo />\n    <div />\n\n    <br />\n  </div>\n);\n\nconst ConnectBtn = () => {\n  const [isConnected, actions] = useIsAppConnected();\n\n  return (\n    <Button variant={\"contained\"} size={\"large\"} onClick={actions.connect}>\n      {isConnected ? \"Refresh\" : \"Connect\"}\n    </Button>\n  );\n};\n\nconst WalletInfo = () => {\n  const [state] = useAppState();\n  return (\n    <div>\n      <p>Network 🌐 {state.network?.name}</p>\n      <p>Wallet 🔑 {state.wallet}</p>\n      <p>Balance 💰 {fmt18(state.balance)}</p>\n    </div>\n  );\n};\n","import { createHook, createSelector, createStore } from \"react-sweet-state\";\nimport { Position } from \"../positions/base/Position\";\nimport _ from \"lodash\";\n\nconst PositionDialogState = createStore({\n  name: \"PositionDialogState\",\n\n  initialState: {\n    position: null as Position | null,\n    useLegacy: false,\n    selectedMethod: \"\",\n    selectedMethodArgs: {},\n  },\n\n  actions: {\n    showPosition:\n      (position: Position) =>\n      async ({ setState, getState }) => {\n        if (getState().position !== position) {\n          setState({ position, selectedMethod: \"\", selectedMethodArgs: {}, useLegacy: false });\n        }\n      },\n\n    closeDialog:\n      () =>\n      async ({ setState }) => {\n        setState({ position: null });\n      },\n\n    selectMethod:\n      (method: string) =>\n      async ({ setState }) => {\n        setState({ selectedMethod: method, selectedMethodArgs: {} });\n      },\n\n    setMethodArg:\n      (index: number, arg: string) =>\n      async ({ setState, getState }) => {\n        setState({ selectedMethodArgs: { ...getState().selectedMethodArgs, [index]: arg } });\n      },\n\n    setUseLegacy:\n      (useLegacy: boolean) =>\n      async ({ setState }) => {\n        setState({ useLegacy });\n      },\n\n    harvest:\n      () =>\n      async ({ getState }) => {\n        await getState().position!.harvest(getState().useLegacy);\n      },\n\n    send:\n      () =>\n      async ({ getState }) => {\n        await getState().position!.sendTransaction(getState().selectedMethod, _.values(getState().selectedMethodArgs), getState().useLegacy);\n      },\n  },\n});\n\nexport const usePositionDialogActions = createHook(PositionDialogState, { selector: null });\nexport const usePositionDialogSelector = createHook(PositionDialogState, {\n  selector: createSelector(\n    (state) => state.position,\n    (state) => state.position?.getContractMethods().filter((m) => !m.startsWith(\"0x\") && m.endsWith(\")\")) || [],\n    (state) => state.selectedMethod,\n    (state) =>\n      state.selectedMethod\n        .substring(state.selectedMethod.indexOf(\"(\") + 1, state.selectedMethod.length - 1)\n        .split(\",\")\n        .filter((a) => a.length > 0),\n    (state) => state.useLegacy,\n    (position, positionMethods, selectedMethod, selectedMethodArgTypes, useLegacy) => ({\n      position,\n      positionMethods,\n      selectedMethod,\n      selectedMethodArgTypes,\n      useLegacy,\n    })\n  ),\n});\n","import React, { useEffect } from \"react\";\nimport { useAllPositionRows, useAllPositions } from \"../state/AllPositionsState\";\nimport { DataGrid, GridColDef } from \"@mui/x-data-grid\";\nimport { useAppState } from \"../state/AppState\";\nimport { usePositionDialogActions } from \"../state/PositionDialogState\";\n\nconst columns: GridColDef[] = [\n  { field: \"type\", headerName: \"Type\", width: 200 },\n  { field: \"amounts\", headerName: \"Amounts\", width: 500 },\n  { field: \"pending\", headerName: \"Pending\", width: 200 },\n  { field: \"health\", headerName: \"Health\", width: 50 },\n];\n\nexport const AllPositionsTable = () => {\n  const [appState, appActions] = useAppState();\n  const [rows, actions] = useAllPositionRows(null);\n  const [positions] = useAllPositions();\n  const [, positionDialogActions] = usePositionDialogActions();\n\n  useEffect(() => {\n    if (appState.network.id) appActions.withLoading(actions.load).then();\n  }, [appState.network, appActions, actions]);\n\n  const click = (p: any) => positionDialogActions.showPosition(positions[p.id.toString()]);\n\n  return (\n    <div style={{ height: 500, width: \"90%\" }}>\n      <DataGrid rows={rows} columns={columns} onCellClick={click} />\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  InputLabel,\n  MenuItem,\n  Select,\n  Switch,\n  TextField,\n} from \"@mui/material\";\nimport { usePositionDialogSelector } from \"../state/PositionDialogState\";\nimport { useAppState } from \"../state/AppState\";\nimport { useAllPositions } from \"../state/AllPositionsState\";\n\nexport const PositionDialog = () => {\n  const [, appStateActions] = useAppState();\n  const [selector, actions] = usePositionDialogSelector(null);\n  const [, allPositionsActions] = useAllPositions();\n\n  const close = () => actions.closeDialog();\n\n  const deletePos = () => appStateActions.withLoading(() => allPositionsActions.delete(selector.position!.getArgs().id)).then(close);\n\n  const harvest = () => appStateActions.withLoading(() => actions.harvest()).then(close);\n\n  const send = () => appStateActions.withLoading(() => actions.send()).then(close);\n\n  return (\n    <div>\n      <Dialog open={!!selector.position} onClose={close}>\n        <DialogTitle>Send Transaction to {selector.position?.getArgs()?.type}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Network: {selector.position?.getNetwork()?.name}</DialogContentText>\n          <DialogContentText>Address: {selector.position?.getArgs()?.address}</DialogContentText>\n\n          <br />\n          <FormControl fullWidth>\n            <InputLabel>Method</InputLabel>\n            <Select value={selector.selectedMethod} label=\"Method\" onChange={(e) => actions.selectMethod(e.target.value)}>\n              {selector.positionMethods.map((m) => (\n                <MenuItem key={m} value={m}>\n                  {m}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n\n          <br />\n          {selector.selectedMethodArgTypes.length > 0 &&\n            selector.selectedMethodArgTypes.map((argType, i) => (\n              <TextField\n                key={argType + i}\n                autoFocus\n                margin=\"dense\"\n                id={argType + i}\n                label={argType}\n                type=\"text\"\n                fullWidth\n                variant=\"standard\"\n                onChange={(e) => actions.setMethodArg(i, e.target.value)}\n              />\n            ))}\n\n          <br />\n          <br />\n\n          <FormGroup>\n            <FormControlLabel control={<Switch checked={selector.useLegacy} onChange={(e: any) => actions.setUseLegacy(e.target.checked)} />} label=\"Use Legacy Transaction Type\" />\n          </FormGroup>\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={deletePos}>Delete Position</Button>\n\n          <Button onClick={harvest}>Just Harvest</Button>\n\n          <Button disabled={!selector.selectedMethod} onClick={send}>\n            Send Custom Transaction\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { Backdrop, CircularProgress, createTheme, ThemeProvider } from \"@mui/material\";\nimport { useAppState } from \"./state/AppState\";\nimport { AppHeader } from \"./ui/AppHeader\";\nimport { AllPositionsTable } from \"./ui/AllPositionsTable\";\nimport { AddPositionDialog } from \"./ui/AddPositionDialog\";\nimport { PositionDialog } from \"./ui/PositionDialog\";\n\nconst darkTheme = createTheme({\n  palette: {\n    mode: \"dark\",\n  },\n});\n\nexport const App = () => {\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <div className=\"App\">\n        <AppHeader />\n\n        <AllPositionsTable />\n\n        <div>\n          <AddPositionDialog />\n          <PositionDialog />\n        </div>\n\n        <div>\n          <Loading />\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n};\n\nconst Loading = () => {\n  const [state] = useAppState();\n  return (\n    <Backdrop sx={{ color: \"#fff\", zIndex: (theme) => theme.zIndex.modal + 1 }} open={state.loading}>\n      <CircularProgress color=\"inherit\" />\n    </Backdrop>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport \"./index.css\";\nimport { Homepage } from \"./Homepage\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <div>\n        <Switch>\n          <Route path=\"/dashboard\" component={App} />\n          <Route path=\"/\" component={Homepage} />\n        </Switch>\n      </div>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n","import React from \"react\";\nimport \"./Homepage.css\";\nimport OrbsLogo from \"./assets/orbs.png\";\nimport DeFiLogo from \"./assets/logo.svg\";\nimport LI1 from \"./assets/list-icon1.svg\";\nimport LI2 from \"./assets/list-icon2.svg\";\nimport LI3 from \"./assets/list-icon3.svg\";\nimport LI4 from \"./assets/list-icon4.svg\";\nimport LI5 from \"./assets/list-icon5.svg\";\nimport DotLine from \"./assets/dotted-line.svg\";\nimport Geom1 from \"./assets/geom1.png\";\nimport Geom2 from \"./assets/geom2.png\";\n\n/* eslint-disable */\nexport const Homepage = () => {\n  return (\n    <div>\n      <div className=\"PartnersSection row\" style={{ paddingTop: \"0px\" }}>\n        <div className=\"LogoSection column\">\n          <div className=\"StrategicPartnersLabel large\">MANAGING PARTNERS</div>\n          <div className=\"StrategicPartnersList row\" style={{ marginTop: \"25px\" }}>\n            <a className=\"OrbsLogo\" href=\"https://www.orbs.com\">\n              <img className=\"OrbsLogo\" src={OrbsLogo} alt={\"Orbs\"} />\n            </a>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"TitleSection column\">\n        <img className=\"logo\" src={DeFiLogo} />\n        <div>\n          <h1>\n            DeFi<span className=\"small\">.js</span>\n          </h1>\n          <p>Community-led initiative to standardize the management of Decentralized Finance positions programmatically</p>\n        </div>\n        <p>UNDER CONSTRUCTION</p>\n      </div>\n      <div className=\"LightSection column spaced\">\n        <h3>Simplify and standardize DeFi position management</h3>\n        <div className=\"IconList row\">\n          <div className=\"column\">\n            <img src={LI1} />\n            <p>Discover and quickly assess leading DeFi protocol strategies</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI2} />\n            <p>Monitor key position properties ex. APY, TVL, rewards</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI3} />\n            <p>Monitor position health and governance</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI4} />\n            <p>Compare historical performances between strategies</p>\n          </div>\n          <div className=\"column\">\n            <img src={LI5} />\n            <p>Composability and interop with the ecosystem</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"DarkSection row DarkAbstract\">\n        <div className=\"Half column\">\n          <div className=\"SectionTitle\">\n            <h2>THE API</h2>\n            <img src={DotLine} />\n          </div>\n        </div>\n        <div className=\"Half column\">\n          <ul className=\"BulletList\">\n            <li>getNetwork(): Network</li>\n            <li>getAssets(): Token[]</li>\n            <li>getRewardAssets(): Token[]</li>\n            <li>getTVL(): Promise&lt;BN&gt;</li>\n            <li>getAPR(): Promise&lt;BN&gt;</li>\n            <li>getHealth(): Promise&lt;Threat[]&gt;</li>\n            <li>getPendingRewards(): Promise&lt;TokenAmount[]&gt;</li>\n          </ul>\n        </div>\n      </div>\n\n      <div className=\"Footer row\">\n        <span>© 2020 defi.org</span>\n        <a href=\"https://www.announcements.defi.org/\">Announcements</a>\n        <a href=\"https://www.privacypolicies.com/generic/\">Privacy</a>\n        <a href=\"https://github.com/defi-org-code\">GitHub</a>\n        <a href=\"https://t.me/defiorg\">Telegram</a>\n        <a href=\"mailto:hello@defi.org\">hello@defi.org</a>\n      </div>\n\n      <div id=\"geometry_container\" hidden={true}>\n        <div style={{ width: \"15%\", maxWidth: \"180px\", position: \"absolute\", left: \"15%\", top: \"-70px\" }}>\n          <img src={Geom1} width=\"100%\" />\n        </div>\n        <div style={{ width: \"15%\", maxWidth: \"360px\", position: \"absolute\", left: \"70%\", top: \"20px\" }}>\n          <img src={Geom2} width=\"100%\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { Position, PositionArgs } from \"./base/Position\";\nimport { PriceOracle } from \"./base/PriceOracle\";\nimport { bn, erc20, ether, fmt18, Token, zero, zeroAddress } from \"@defi.org/web3-candies\";\nimport {\n  AbiRegistry,\n  Address,\n  BigUIntType,\n  BigUIntValue,\n  BinaryCodec,\n  ContractFunction,\n  ContractInterface,\n  EndpointDefinition,\n  EnumType,\n  ProxyProvider,\n  Query,\n  ScArgumentsParser,\n  SmartContract,\n  SmartContractAbi,\n  Struct,\n  StructField,\n  StructFieldDefinition,\n  StructType,\n  TokenIdentifierType,\n  U64Type,\n} from \"@elrondnetwork/erdjs/out\";\nimport _ from \"lodash\";\nimport { ContractWrapper } from \"@elrondnetwork/erdjs/out/smartcontracts/wrapper/contractWrapper\";\nimport BigNumber from \"bignumber.js\";\nimport { StructBinaryCodec } from \"@elrondnetwork/erdjs/out/smartcontracts/codec/struct\";\n\nconst ZERO_ADDRESS = \"erd1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq6gq4hu\";\nconst ESDT_ISSUE_ADDRESS = \"erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u\";\nconst LOCKED_ASSET_FACTORY_ADDRESS = \"erd1qqqqqqqqqqqqqpgqjpt0qqgsrdhp2xqygpjtfrpwf76f9nvg2jpsg4q7th\";\nconst ROUTE_ADDRESS = \"erd1qqqqqqqqqqqqqpgqq66xk9gfr4esuhem3jru86wg5hvp33a62jps2fy57p\";\nconst EGLD_MEX_POOL_ADDRESS = \"erd1qqqqqqqqqqqqqpgqa0fsfshnff4n76jhcye6k7uvd7qacsq42jpsp6shh2\";\nconst EGLD_USDC_POOL_ADDRESS = \"erd1qqqqqqqqqqqqqpgqeel2kumf0r8ffyhth7pqdujjat9nx0862jpsg2pqaq\";\nconst EGLDMEX_FARM_ADDRESS = \"erd1qqqqqqqqqqqqqpgqye633y7k0zd7nedfnp3m48h24qygm5jl2jpslxallh\";\nconst EGLDUSDC_FARM_ADDRESS = \"erd1qqqqqqqqqqqqqpgqsw9pssy8rchjeyfh8jfafvl3ynum0p9k2jps6lwewp\";\nconst MEX_FARM_ADDRESS = \"erd1qqqqqqqqqqqqqpgqv4ks4nzn2cw96mm06lt7s2l3xfrsznmp2jpsszdry5\";\nconst PROXY_ADDRESS = \"erd1qqqqqqqqqqqqqpgqrc4pg2xarca9z34njcxeur622qmfjp8w2jps89fxnl\";\n\nconst MEX_TOKEN = \"MEX-455c57\";\nconst LKMEX_TOKEN = \"LKMEX-aab910\";\nconst WEGLD_TOKEN = \"WEGLD-bd4d79\";\nconst USDC_TOKEN = \"USDC-c76f1f\";\n\nconst EGLDMEXLP = \"EGLDMEX-0be9e5\";\nconst EGLDUSDCLP = \"EGLDUSDC-594e5e\";\nconst EGLDMEXF = \"EGLDMEXF-5bcc57\";\nconst EGLDUSDCF = \"EGLDUSDCF-8600f8\";\nconst MEXFARM = \"MEXFARM-e7af52\";\nconst LOCKED_LP = \"LKLP-03a2fa\";\nconst LOCKED_FARM = \"LKFARM-9d1ea8\";\n\nconst WEGLD_SHARD0 = \"erd1qqqqqqqqqqqqqpgqvc7gdl0p4s97guh498wgz75k8sav6sjfjlwqh679jy\";\nconst WEGLD_SHARD1 = \"erd1qqqqqqqqqqqqqpgqhe8t5jewej70zupmh44jurgn29psua5l2jps3ntjj3\";\nconst WEGLD_SHARD2 = \"erd1qqqqqqqqqqqqqpgqmuk0q2saj0mgutxm4teywre6dl8wqf58xamqdrukln\";\n\nexport namespace ElrondMaiar {\n  export type ESDT = Token & { esdt: true; tokenId: string };\n\n  function esdt(name: string, tokenId: string): ESDT {\n    const result = erc20(name, zeroAddress) as ESDT;\n    result.esdt = true;\n    result.tokenId = tokenId;\n    return result;\n  }\n\n  export const tokens = {\n    EGLD: () => esdt(\"EGLD\", WEGLD_TOKEN),\n    USDC: () => esdt(\"USDC\", USDC_TOKEN),\n    MEX: () => esdt(\"MEX\", MEX_TOKEN),\n  };\n\n  const provider = new ProxyProvider(\"https://gateway.elrond.com\", { timeout: 60 * 1000 });\n\n  export class Farm implements Position {\n    data = {\n      rewardAmount: zero,\n      rewardValue: zero,\n    };\n\n    constructor(public args: PositionArgs, public oracle: PriceOracle, public assets: ESDT[]) {\n      if (!_.every(assets, (a) => a.esdt)) throw new Error(`only ESDT tokens: ${assets}`);\n    }\n\n    getArgs = () => this.args;\n\n    getNetwork = () => ({ id: -508, name: \"Elrond\", shortname: \"egld\" });\n\n    getAssets = () => this.assets;\n\n    getRewardAssets = () => [tokens.MEX()];\n\n    getData = () => this.data;\n\n    getHealth = () => [];\n\n    getAmounts() {\n      return [];\n    }\n\n    getPendingRewards() {\n      return [];\n    }\n\n    async load() {\n      const account = new Address(this.args.address);\n      const esdts = await provider.getAddressEsdtList(account);\n      const farmNfts = _.filter(esdts, (v) => v.tokenIdentifier.startsWith(EGLDUSDCF));\n      const balanceEGLD = bn((await provider.getAccount(account)).balance.toString());\n\n      const farm = new SmartContract({ address: new Address(EGLDUSDC_FARM_ADDRESS) });\n      const lpReserve = base64((await farm.runQuery(provider, { func: new ContractFunction(\"getFarmingTokenReserve\") })).returnData[0]);\n      const farmNftSupply = base64((await farm.runQuery(provider, { func: new ContractFunction(\"getFarmTokenSupply\") })).returnData[0]);\n      const farmNftBalance = farmNfts.map((nft) => bn(nft.balance)).reduce((sum, b) => sum.add(b), zero);\n      const farmNftPercentOfSupply = farmNftBalance.mul(ether).div(farmNftSupply);\n      const lpReserveBalance = lpReserve.mul(farmNftPercentOfSupply).div(ether);\n\n      console.log(\"lpReserve\", fmt18(lpReserve));\n      console.log(\"farmNftSupply\", fmt18(farmNftSupply));\n      console.log(\"farmNftBalance\", fmt18(farmNftBalance));\n      console.log(\"farmNftPercentOfSupply\", fmt18(farmNftPercentOfSupply));\n      console.log(\"lpReserveBalance\", fmt18(lpReserveBalance));\n\n      const pair = new SmartContract({ address: new Address(EGLD_USDC_POOL_ADDRESS) });\n\n      //pub struct EsdtTokenPayment<BigUint: BigUintApi> {\n      //     pub token_type: EsdtTokenType,\n      //     pub token_name: TokenIdentifier,\n      //     pub token_nonce: u64,\n      //     pub amount: BigUint,\n      // }\n      //pub enum EsdtTokenType {\n      //     Fungible,\n      //     NonFungible,\n      //     SemiFungible,\n      //     Meta,\n      //     Invalid,\n      // }\n\n      const tokensForPositionRaw = await pair.runQuery(provider, {\n        func: new ContractFunction(\"getTokensForGivenPosition\"),\n        args: [new BigUIntValue(BigNumber.sum(lpReserveBalance.toString()))],\n      });\n      console.log(tokensForPositionRaw);\n\n      console.log(\"base64\", base64(tokensForPositionRaw.returnData[0]).toString(16));\n    }\n\n    getContractMethods = () => [];\n\n    async sendTransaction(method: string, args: string[], useLegacyTx: boolean) {}\n\n    async harvest(useLegacyTx: boolean) {}\n  }\n}\n\nfunction base64(s: string) {\n  return bn(Buffer.from(s, \"base64\").toString(\"hex\"), 16);\n}\nfunction base64Str(s: string) {\n  return Buffer.from(s, \"base64\").toString(\"utf8\");\n}\n","var map = {\n\t\"./bls.js\": 478,\n\t\"./bls_c.js\": 479\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 969;"],"sourceRoot":""}